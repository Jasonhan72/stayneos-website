(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{6426:function(e,s,t){Promise.resolve().then(t.bind(t,9725))},9725:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var l=t(7437),a=t(2265),i=t(3145),r=t(7648),n=t(1723),c=t(401),x=t(2489),d=t(1047),m=t(3774),o=t(8226),u=t(3417),h=t(2735),p=t(6595),j=t(407),f=t(7625),N=t(6741),g=t(4594);let b=[{id:"BK001",property:{id:"1",title:"Cooper St 豪华湖景公寓",location:"5811-55 Cooper St, Toronto, ON M5E 0G1",image:"/images/cooper-55-dining.jpg"},checkIn:"2024-03-01",checkOut:"2024-03-31",nights:30,guests:2,status:"upcoming",totalPrice:17680,paidAmount:17680,paymentStatus:"paid",bookingDate:"2024-02-01",confirmationCode:"STY-2024-001"},{id:"BK002",property:{id:"2",title:"Simcoe St 高层精品公寓",location:"3709-238 Simcoe St, Toronto, ON M5S 1T4",image:"/images/simcoe-238-living.jpg"},checkIn:"2024-01-15",checkOut:"2024-02-15",nights:31,guests:2,status:"completed",totalPrice:12150,paidAmount:12150,paymentStatus:"paid",bookingDate:"2023-12-20",confirmationCode:"STY-2024-002",review:{rating:5,comment:"非常棒的住宿体验，公寓干净整洁，位置便利，强烈推荐！",date:"2024-02-16"}},{id:"BK003",property:{id:"1",title:"Cooper St 豪华湖景公寓",location:"5811-55 Cooper St, Toronto, ON M5E 0G1",image:"/images/cooper-55-c5e8357d.jpg"},checkIn:"2024-05-01",checkOut:"2024-05-31",nights:30,guests:3,status:"confirmed",totalPrice:17680,paidAmount:8840,paymentStatus:"partial",bookingDate:"2024-01-20",confirmationCode:"STY-2024-003"}],v={upcoming:{label:"即将入住",color:"bg-primary",icon:n.Z},confirmed:{label:"已确认",color:"bg-success",icon:c.Z},completed:{label:"已完成",color:"bg-neutral-500",icon:c.Z},cancelled:{label:"已取消",color:"bg-error",icon:x.Z}};function y(){let[e,s]=(0,a.useState)("all"),[t,n]=(0,a.useState)(null),[c,x]=(0,a.useState)(!1),[y,z]=(0,a.useState)(5),[k,w]=(0,a.useState)(""),C=b.filter(s=>"all"===e||("upcoming"===e?["upcoming","confirmed"].includes(s.status):"completed"!==e||"completed"===s.status));return(0,l.jsxs)("main",{className:"min-h-screen bg-neutral-50 pt-24 pb-12",children:[(0,l.jsxs)(N.W2,{children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-neutral-900",children:"我的预订"}),(0,l.jsx)("p",{className:"text-neutral-600 mt-2",children:"管理您的预订和查看历史记录"})]}),(0,l.jsx)("div",{className:"flex gap-2 mb-6 border-b border-neutral-200",children:[{id:"all",label:"全部预订",count:b.length},{id:"upcoming",label:"即将入住",count:b.filter(e=>["upcoming","confirmed"].includes(e.status)).length},{id:"completed",label:"已完成",count:b.filter(e=>"completed"===e.status).length}].map(t=>(0,l.jsxs)("button",{onClick:()=>s(t.id),className:"px-6 py-3 font-medium transition-colors relative ".concat(e===t.id?"text-primary":"text-neutral-600 hover:text-neutral-900"),children:[t.label,(0,l.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-neutral-200 text-neutral-600 text-xs",children:t.count}),e===t.id&&(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]},t.id))}),(0,l.jsx)("div",{className:"space-y-6",children:0===C.length?(0,l.jsxs)(N.Zb,{className:"p-12 text-center",children:[(0,l.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-neutral-100 flex items-center justify-center",children:(0,l.jsx)(d.Z,{size:32,className:"text-neutral-400"})}),(0,l.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"暂无预订"}),(0,l.jsx)("p",{className:"text-neutral-600 mb-4",children:"您还没有符合条件的预订记录"}),(0,l.jsx)(r.default,{href:"/properties",children:(0,l.jsx)(N.zx,{children:"浏览房源"})})]}):C.map(e=>{let s=v[e.status].icon;return(0,l.jsx)(N.Zb,{className:"overflow-hidden",children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,l.jsxs)("div",{className:"relative w-full lg:w-72 h-48 lg:h-auto flex-shrink-0",children:[(0,l.jsx)(i.default,{src:e.property.image,alt:e.property.title,fill:!0,className:"object-cover"}),(0,l.jsxs)("div",{className:"absolute top-4 left-4 px-3 py-1 text-white text-sm font-medium flex items-center gap-1 ".concat(v[e.status].color),children:[(0,l.jsx)(s,{size:14}),v[e.status].label]})]}),(0,l.jsx)("div",{className:"flex-1 p-6",children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm text-neutral-500",children:["预订号: ",e.confirmationCode]}),(0,l.jsx)(r.default,{href:"/property/".concat(e.property.id),className:"text-xl font-semibold text-neutral-900 hover:text-primary transition-colors",children:e.property.title})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-neutral-500 text-sm mb-4",children:[(0,l.jsx)(m.Z,{size:14}),(0,l.jsx)("span",{children:e.property.location})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"p-3 bg-neutral-50 border border-neutral-200",children:[(0,l.jsx)("p",{className:"text-xs text-neutral-500",children:"入住日期"}),(0,l.jsx)("p",{className:"font-medium text-neutral-900",children:e.checkIn})]}),(0,l.jsxs)("div",{className:"p-3 bg-neutral-50 border border-neutral-200",children:[(0,l.jsx)("p",{className:"text-xs text-neutral-500",children:"退房日期"}),(0,l.jsx)("p",{className:"font-medium text-neutral-900",children:e.checkOut})]}),(0,l.jsxs)("div",{className:"p-3 bg-neutral-50 border border-neutral-200",children:[(0,l.jsx)("p",{className:"text-xs text-neutral-500",children:"入住天数"}),(0,l.jsxs)("p",{className:"font-medium text-neutral-900",children:[e.nights," 晚"]})]}),(0,l.jsxs)("div",{className:"p-3 bg-neutral-50 border border-neutral-200",children:[(0,l.jsx)("p",{className:"text-xs text-neutral-500",children:"入住人数"}),(0,l.jsxs)("p",{className:"font-medium text-neutral-900",children:[e.guests," 人"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(o.Z,{size:16,className:"text-neutral-400"}),(0,l.jsx)("span",{className:"text-sm",children:"paid"===e.paymentStatus?"已全额支付":"部分支付"})]}),(0,l.jsxs)("div",{className:"text-sm text-neutral-400",children:["预订日期: ",e.bookingDate]})]})]}),(0,l.jsxs)("div",{className:"lg:text-right",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"text-sm text-neutral-500",children:"总价"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-neutral-900",children:["$",e.totalPrice.toLocaleString()," CAD"]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:["upcoming"===e.status&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(N.zx,{variant:"outline",size:"sm",children:[(0,l.jsx)(u.Z,{size:14,className:"mr-1"}),"联系房东"]}),(0,l.jsxs)(N.zx,{variant:"outline",size:"sm",children:[(0,l.jsx)(h.Z,{size:14,className:"mr-1"}),"下载凭证"]})]}),"completed"===e.status&&!e.review&&(0,l.jsxs)(N.zx,{size:"sm",onClick:()=>{n(e),x(!0)},children:[(0,l.jsx)(p.Z,{size:14,className:"mr-1"}),"写评价"]}),e.review&&(0,l.jsxs)("div",{className:"flex items-center gap-1 text-amber-500",children:[Array.from({length:5}).map((s,t)=>(0,l.jsx)(p.Z,{size:14,className:t<e.review.rating?"fill-amber-400":"text-neutral-300"},t)),(0,l.jsx)("span",{className:"text-sm text-neutral-600 ml-2",children:"已评价"})]}),(0,l.jsxs)(N.zx,{variant:"ghost",size:"sm",onClick:()=>n(e),children:["查看详情",(0,l.jsx)(j.Z,{size:14,className:"ml-1"})]})]})]})]})})]})},e.id)})})]}),(0,l.jsx)(N.u_,{isOpen:!!t&&!c,onClose:()=>n(null),title:"预订详情",size:"lg",footer:(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)(N.zx,{variant:"outline",onClick:()=>n(null),children:"关闭"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(N.zx,{variant:"outline",children:[(0,l.jsx)(f.Z,{size:16,className:"mr-1"}),"打印"]}),(0,l.jsxs)(N.zx,{variant:"outline",children:[(0,l.jsx)(h.Z,{size:16,className:"mr-1"}),"下载PDF"]})]})]}),children:t&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-primary/5 border border-primary/20",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-neutral-500",children:"确认码"}),(0,l.jsx)("p",{className:"text-xl font-bold text-primary",children:t.confirmationCode})]}),(0,l.jsx)(N.Ct,{variant:"upcoming"===t.status?"primary":"default",children:v[t.status].label})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-neutral-500",children:"房源"}),(0,l.jsx)("p",{className:"font-medium",children:t.property.title})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-neutral-500",children:"地址"}),(0,l.jsx)("p",{className:"font-medium",children:t.property.location})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-neutral-500",children:"入住日期"}),(0,l.jsx)("p",{className:"font-medium",children:t.checkIn})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-neutral-500",children:"退房日期"}),(0,l.jsx)("p",{className:"font-medium",children:t.checkOut})]})]}),(0,l.jsx)(N.iz,{}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium mb-3",children:"费用明细"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-neutral-600",children:"房费"}),(0,l.jsxs)("span",{children:["$",t.totalPrice.toLocaleString()," CAD"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-neutral-600",children:"服务费"}),(0,l.jsx)("span",{children:"包含在内"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-neutral-600",children:"税费"}),(0,l.jsx)("span",{children:"包含在内"})]}),(0,l.jsx)(N.iz,{className:"my-2"}),(0,l.jsxs)("div",{className:"flex justify-between font-semibold text-base",children:[(0,l.jsx)("span",{children:"总计"}),(0,l.jsxs)("span",{children:["$",t.totalPrice.toLocaleString()," CAD"]})]})]})]})]})}),(0,l.jsx)(N.u_,{isOpen:c,onClose:()=>{x(!1),n(null)},title:"撰写评价",footer:(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)(N.zx,{variant:"ghost",onClick:()=>{x(!1),n(null)},children:"取消"}),(0,l.jsx)(N.zx,{onClick:()=>{setTimeout(()=>{x(!1),n(null),z(5),w("")},500)},children:"提交评价"})]}),children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("p",{className:"text-neutral-600",children:["请为 ",null==t?void 0:t.property.title," 撰写评价"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"评分"}),(0,l.jsx)("div",{className:"flex gap-2",children:Array.from({length:5}).map((e,s)=>(0,l.jsx)("button",{onClick:()=>z(s+1),className:"p-1",children:(0,l.jsx)(p.Z,{size:28,className:s<y?"text-amber-400 fill-amber-400":"text-neutral-300"})},s))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"评价内容"}),(0,l.jsx)("textarea",{value:k,onChange:e=>w(e.target.value),placeholder:"分享您的入住体验...",rows:4,className:"w-full px-4 py-3 border border-neutral-300 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary resize-none"})]})]})}),(0,l.jsx)(g.default,{})]})}},4594:function(e,s,t){"use strict";var l=t(7437),a=t(7648),i=t(4938);s.default=function(e){let{className:s="",variant:t="fixed"}=e;return"fixed"===t?(0,l.jsxs)(a.default,{href:"/",className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 px-4 py-3 bg-primary text-white shadow-lg hover:bg-primary-700 transition-all ".concat(s),title:"返回首页",children:[(0,l.jsx)(i.Z,{size:20}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"首页"})]}):(0,l.jsxs)(a.default,{href:"/",className:"inline-flex items-center gap-2 px-4 py-2 text-primary hover:text-primary-700 transition-colors ".concat(s),children:[(0,l.jsx)(i.Z,{size:18}),(0,l.jsx)("span",{children:"返回首页"})]})}}},function(e){e.O(0,[648,60,878,397,276,971,117,744],function(){return e(e.s=6426)}),_N_E=e.O()}]);