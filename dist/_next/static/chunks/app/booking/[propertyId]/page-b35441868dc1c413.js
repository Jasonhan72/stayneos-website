(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{5858:function(e,t,s){Promise.resolve().then(s.bind(s,920))},920:function(e,t,s){"use strict";s.d(t,{default:function(){return I}});var a=s(7437),r=s(2265),n=s(9376),l=s(3145),i=s(7648),c=s(5053),o=s(8211),d=s(8672),x=s(4604),m=s(6987),h=s(257);h.env.STRIPE_SECRET_KEY&&new m.Z(h.env.STRIPE_SECRET_KEY,{apiVersion:"2026-01-28.clover"});let u=h.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY||"",g=u?(0,d.J)(u):null;function f(e){let{children:t,clientSecret:s}=e;return g?(0,a.jsx)(x.eK,{stripe:g,options:s?{clientSecret:s,appearance:{theme:"stripe"}}:void 0,children:t}):(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700",children:"支付系统配置错误，请联系客服"})}var p=s(6741),b=s(8906),j=s(1817),N=s(8226);function v(e){let{amount:t,currency:s,onSuccess:n,onError:l}=e,i=(0,x.MD)(),c=(0,x.lq)(),[o,d]=(0,r.useState)(!1),[m,h]=(0,r.useState)(""),u=async e=>{if(e.preventDefault(),i&&c){d(!0),h("");try{let{error:e,paymentIntent:t}=await i.confirmPayment({elements:c,confirmParams:{return_url:"".concat(window.location.origin,"/payment/success")},redirect:"if_required"});e?(h(e.message||"支付失败，请重试"),l(e.message||"支付失败")):t&&"succeeded"===t.status?n():(h("支付状态未知，请稍后查看订单状态"),l("支付状态未知"))}catch(t){let e=t instanceof Error?t.message:"支付处理失败";h("支付处理失败，请重试"),l(e)}finally{d(!1)}}};return(0,a.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 text-green-700 text-sm",children:[(0,a.jsx)(b.Z,{size:16}),(0,a.jsx)("span",{children:"您的支付信息已加密保护"})]}),(0,a.jsx)("div",{className:"border border-neutral-200 rounded-lg p-4",children:(0,a.jsx)(x.Hn,{options:{layout:"tabs",defaultValues:{billingDetails:{name:"",email:"",phone:"",address:{country:"CA"}}}}})}),m&&(0,a.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 text-sm",children:m}),(0,a.jsx)(p.zx,{type:"submit",disabled:!i||o,isLoading:o,className:"w-full py-4 text-lg",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{className:"animate-spin mr-2",size:20}),"处理中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.Z,{className:"mr-2",size:20}),"确认支付 ",new Intl.NumberFormat("en-CA",{style:"currency",currency:s}).format(t)]})}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500 text-center",children:['点击"确认支付"即表示您同意我们的服务条款和隐私政策。',(0,a.jsx)("br",{}),"您的卡将在入住后24小时内被扣款。"]})]})}var y=s(6586),w=s(2451),k=s(401),S=s(9322),D=s(3774),C=s(1047),z=s(6337);function I(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),s=(0,n.useSearchParams)(),d=e.propertyId,x=(0,y._1)(d),m=s.get("checkIn")||"",h=s.get("checkOut")||"",u=parseInt(s.get("guests")||"2",10),[g,N]=(0,r.useState)(m),[I,E]=(0,r.useState)(h),[T,Z]=(0,r.useState)(u),[L,O]=(0,r.useState)(""),[_,P]=(0,r.useState)(""),[A,F]=(0,r.useState)(""),[R,M]=(0,r.useState)(""),[$,q]=(0,r.useState)(1),[Y,H]=(0,r.useState)(!1),[G,K]=(0,r.useState)(""),[,U]=(0,r.useState)(""),[B,J]=(0,r.useState)(""),[V,W]=(0,r.useState)("");if((0,r.useEffect)(()=>{x||t.push("/properties")},[x,t]),!x)return null;let X=g&&I?function(e,t,s){let a=new Date(t),r=Math.ceil((new Date(s).getTime()-a.getTime())/864e5),n=e.minNights||28,l=r>=28,i=e.price,c=1,o=0;l&&e.monthlyDiscount&&(o=e.monthlyDiscount,c=(100-e.monthlyDiscount)/100);let d=r*Math.round(i*c),x=Math.round(.1*d),m=Math.round(.13*(d+0+x));return{nights:r,basePrice:i,subtotal:d,cleaningFee:0,serviceFee:x,discount:r*i-d,discountRate:c,discountPercentage:o,tax:m,total:d+0+x+m,isMonthly:l,meetsMinNights:r>=n,minNights:n,currency:"CAD"}}(x,g,I):null,Q=g&&I?function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:28,a=new Date(e),r=new Date(t),n=new Date;return(n.setHours(0,0,0,0),isNaN(a.getTime())||isNaN(r.getTime()))?{valid:!1,error:"请选择有效的日期"}:a<n?{valid:!1,error:"入住日期不能是过去"}:r<=a?{valid:!1,error:"退房日期必须在入住日期之后"}:Math.ceil((r.getTime()-a.getTime())/864e5)<s?{valid:!1,error:"最少需要预订 ".concat(s," 天")}:{valid:!0}}(g,I,x.minNights):{valid:!0},ee=async()=>{if(!g||!I){K("请选择入住和退房日期");return}if(!Q.valid){K(Q.error||"日期选择无效");return}if(!L||!_||!A){K("请填写完整的入住人信息");return}H(!0),K("");try{let e=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({propertyId:x.id,checkIn:g,checkOut:I,guests:T,guestName:L,guestEmail:_,guestPhone:A,specialRequests:R})}),t=await e.json();if(!e.ok)throw Error(t.error||"创建预订失败");U(t.booking.id),W(t.booking.bookingNumber),q(3),await et(t.booking.id)}catch(e){K(e instanceof Error?e.message:"创建预订失败")}finally{H(!1)}},et=async e=>{try{let t=await fetch("/api/payments/create-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingId:e})}),s=await t.json();if(!t.ok)throw Error(s.error||"创建支付失败");J(s.clientSecret)}catch(e){K(e instanceof Error?e.message:"创建支付失败")}};return(0,a.jsxs)("main",{className:"min-h-screen bg-amber-50",children:[(0,a.jsx)(c.default,{}),(0,a.jsx)("div",{className:"pt-20 pb-12",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl",children:[(0,a.jsxs)(i.default,{href:"/properties/".concat(x.id),className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[(0,a.jsx)(w.Z,{size:20}),(0,a.jsx)("span",{children:"返回房源详情"})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-center max-w-2xl mx-auto",children:[1,2,3].map((e,t)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full font-semibold ".concat($>=e?"bg-amber-500 text-white":"bg-gray-200 text-gray-500"),children:$>e?(0,a.jsx)(k.Z,{size:20}):e},e),t<2&&(0,a.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat($>e?"bg-amber-500":"bg-gray-200")},"line-".concat(t))]}))}),(0,a.jsxs)("div",{className:"flex justify-center gap-8 mt-2 text-sm text-gray-600",children:[(0,a.jsx)("span",{children:"选择日期"}),(0,a.jsx)("span",{children:"确认信息"}),(0,a.jsx)("span",{children:"完成支付"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[1===$&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"选择日期和人数"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"入住日期 - 退房日期"}),(0,a.jsx)(o.Z,{checkIn:g,checkOut:I,onCheckInChange:N,onCheckOutChange:E,minNights:x.minNights}),!Q.valid&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-amber-600 text-sm",children:[(0,a.jsx)(S.Z,{size:16}),(0,a.jsx)("span",{children:Q.error})]}),x.minNights&&(0,a.jsxs)("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm",children:[(0,a.jsxs)("span",{className:"font-medium text-amber-800",children:["\uD83D\uDCC5 ",x.minNights,"天起租"]}),x.monthlyDiscount&&(0,a.jsxs)("span",{className:"text-amber-700 ml-2",children:["\xb7 月租享",x.monthlyDiscount,"%折扣"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"入住人数"}),(0,a.jsx)("select",{value:T,onChange:e=>Z(Number(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:Array.from({length:x.maxGuests}).map((e,t)=>(0,a.jsxs)("option",{value:t+1,children:[t+1,"位房客"]},t))})]})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-end",children:(0,a.jsx)(p.zx,{onClick:()=>q(2),disabled:!g||!I||!Q.valid,size:"lg",children:"下一步"})})]}),2===$&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"确认入住信息"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(p.II,{label:"入住人姓名 *",value:L,onChange:e=>O(e.target.value),placeholder:"请输入入住人姓名",required:!0}),(0,a.jsx)(p.II,{label:"联系电话 *",value:A,onChange:e=>F(e.target.value),placeholder:"请输入联系电话",required:!0})]}),(0,a.jsx)(p.II,{label:"电子邮箱 *",type:"email",value:_,onChange:e=>P(e.target.value),placeholder:"请输入电子邮箱",required:!0}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"特殊需求（选填）"}),(0,a.jsx)("textarea",{value:R,onChange:e=>M(e.target.value),placeholder:"如有特殊需求请在此说明...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none"})]})]}),G&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(S.Z,{size:18}),(0,a.jsx)("span",{children:G})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,a.jsx)(p.zx,{variant:"outline",onClick:()=>q(1),children:"返回修改"}),(0,a.jsx)(p.zx,{onClick:ee,disabled:Y,isLoading:Y,size:"lg",children:Y?"创建预订中...":"确认并支付"})]})]}),3===$&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"安全支付"}),B?(0,a.jsx)(f,{clientSecret:B,children:(0,a.jsx)(v,{amount:(null==X?void 0:X.total)||0,currency:(null==X?void 0:X.currency)||"CAD",onSuccess:()=>{t.push("/payment/success?booking=".concat(V))},onError:e=>{K(e)}})}):(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(j.Z,{className:"animate-spin mr-2",size:24}),(0,a.jsx)("span",{children:"加载支付信息中..."})]}),G&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(S.Z,{size:18}),(0,a.jsx)("span",{children:G})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"sticky top-24 bg-white rounded-xl p-6 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex gap-4 mb-6 pb-6 border-b border-gray-100",children:[(0,a.jsx)("div",{className:"relative w-24 h-24 rounded-lg overflow-hidden",children:(0,a.jsx)(l.default,{src:x.images[0],alt:x.title,fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:x.title}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-500 text-sm mt-1",children:[(0,a.jsx)(D.Z,{size:14}),(0,a.jsx)("span",{className:"line-clamp-1",children:x.location})]})]})]}),g&&I&&(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(C.Z,{size:18,className:"text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"入住日期"}),(0,a.jsx)("p",{className:"font-medium",children:g})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(C.Z,{size:18,className:"text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"退房日期"}),(0,a.jsx)("p",{className:"font-medium",children:I})]})]})]}),X&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["$",X.basePrice.toLocaleString()," CAD x ",X.nights,"晚"]}),(0,a.jsxs)("span",{children:["$",X.subtotal.toLocaleString()," CAD"]})]}),X.discount>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,a.jsxs)("span",{children:["月租折扣 (",X.discountPercentage,"% off)"]}),(0,a.jsxs)("span",{children:["-$",X.discount.toLocaleString()," CAD"]})]}),X.cleaningFee>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"清洁费"}),(0,a.jsxs)("span",{children:["$",X.cleaningFee.toLocaleString()," CAD"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"服务费"}),(0,a.jsxs)("span",{children:["$",X.serviceFee.toLocaleString()," CAD"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"税费 (13% HST)"}),(0,a.jsxs)("span",{children:["$",X.tax.toLocaleString()," CAD"]})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-bold text-lg",children:"总价"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:["$",X.total.toLocaleString()," CAD"]})]})})]}),(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[(0,a.jsx)(b.Z,{size:16}),(0,a.jsx)("span",{children:"安全支付保障"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(z.Z,{size:16}),(0,a.jsx)("span",{children:"信息已加密保护"})]})]})]})})]})]})})]})}},5053:function(e,t,s){"use strict";s.d(t,{default:function(){return h}});var a=s(7437),r=s(29),n=s.n(r),l=s(2265),i=s(7648),c=s(3145),o=s(3041),d=s(9345),x=s(3448),m=s(6334);function h(e){let{variant:t="light",showContact:s=!0}=e,[r,h]=(0,l.useState)(!1),[u,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=()=>{h(window.scrollY>20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let f=[{href:"/",label:"首页"},{href:"/properties",label:"房源"},{href:"/services",label:"服务"},{href:"/about",label:"关于我们"},{href:"/contact",label:"联系我们"}],p={light:"text-neutral-700 hover:text-neutral-900",dark:"text-white/90 hover:text-white",transparent:r?"text-neutral-700 hover:text-neutral-900":"text-white/90 hover:text-white"},b=r?"light":t;return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)("div",{className:"jsx-5ac20f1ba520252c bg-primary text-white py-2.5 px-4 hidden md:block",children:(0,a.jsxs)("div",{className:"jsx-5ac20f1ba520252c max-w-7xl mx-auto flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"jsx-5ac20f1ba520252c flex items-center gap-6",children:[(0,a.jsxs)("a",{href:"tel:+1-234-567-8900",className:"jsx-5ac20f1ba520252c flex items-center gap-2 hover:text-accent transition-colors duration-200",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"jsx-5ac20f1ba520252c",children:"+1 (234) 567-8900"})]}),(0,a.jsxs)("a",{href:"mailto:info@stayneos.com",className:"jsx-5ac20f1ba520252c flex items-center gap-2 hover:text-accent transition-colors duration-200",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"jsx-5ac20f1ba520252c",children:"info@stayneos.com"})]})]}),(0,a.jsxs)("div",{className:"jsx-5ac20f1ba520252c flex items-center gap-4",children:[(0,a.jsx)(i.default,{href:"/login",className:"hover:text-accent transition-colors duration-200",children:"登录"}),(0,a.jsx)("span",{className:"jsx-5ac20f1ba520252c text-primary-300",children:"|"}),(0,a.jsx)(i.default,{href:"/register",className:"hover:text-accent transition-colors duration-200",children:"注册"})]})]})}),(0,a.jsxs)("nav",{className:"jsx-5ac20f1ba520252c "+((0,x.cn)("sticky top-0 z-50 transition-all duration-300",{light:r?"bg-white shadow-md":"bg-white",dark:r?"bg-primary shadow-md":"bg-primary",transparent:r?"bg-white shadow-md":"bg-transparent"}[b])||""),children:[(0,a.jsx)("div",{className:"jsx-5ac20f1ba520252c max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"jsx-5ac20f1ba520252c flex items-center justify-between h-16 md:h-20",children:[(0,a.jsx)(i.default,{href:"/",className:"flex items-center shrink-0",children:(0,a.jsx)(c.default,{src:"/logo.png",alt:"StayNeos",width:140,height:48,className:"h-9 md:h-10 w-auto object-contain",priority:!0})}),(0,a.jsx)("div",{className:"jsx-5ac20f1ba520252c hidden lg:flex items-center gap-8",children:f.map(e=>(0,a.jsx)(i.default,{href:e.href,className:(0,x.cn)("text-sm font-medium transition-colors duration-200 py-2",p[b]),children:e.label},e.href))}),(0,a.jsx)("div",{className:"jsx-5ac20f1ba520252c hidden lg:flex items-center gap-4",children:(0,a.jsx)(m.default,{variant:"primary",size:"md",onClick:()=>window.location.href="/properties",children:"浏览房源"})}),(0,a.jsx)("button",{type:"button",onClick:()=>g(!u),"aria-label":u?"关闭菜单":"打开菜单","aria-expanded":u,className:"jsx-5ac20f1ba520252c "+((0,x.cn)("lg:hidden p-2.5 rounded-lg transition-colors duration-200","hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-accent",p[b])||""),children:(0,a.jsxs)("div",{className:"jsx-5ac20f1ba520252c relative w-6 h-6",children:[(0,a.jsx)("span",{className:"jsx-5ac20f1ba520252c "+((0,x.cn)("absolute left-0 block w-6 h-0.5 bg-current transition-all duration-300",u?"top-3 rotate-45":"top-1")||"")}),(0,a.jsx)("span",{className:"jsx-5ac20f1ba520252c "+((0,x.cn)("absolute left-0 top-3 block w-6 h-0.5 bg-current transition-all duration-300",u?"opacity-0":"opacity-100")||"")}),(0,a.jsx)("span",{className:"jsx-5ac20f1ba520252c "+((0,x.cn)("absolute left-0 block w-6 h-0.5 bg-current transition-all duration-300",u?"top-3 -rotate-45":"top-5")||"")})]})})]})}),(0,a.jsx)("div",{className:"jsx-5ac20f1ba520252c "+((0,x.cn)("lg:hidden absolute top-full left-0 right-0 bg-white shadow-xl transition-all duration-300 overflow-hidden",u?"max-h-[500px] opacity-100 border-t border-neutral-200":"max-h-0 opacity-0")||""),children:(0,a.jsxs)("div",{className:"jsx-5ac20f1ba520252c px-4 py-4 space-y-1",children:[f.map((e,t)=>(0,a.jsx)(i.default,{href:e.href,onClick:()=>g(!1),className:(0,x.cn)("block py-3 px-4 text-neutral-700 font-medium transition-all duration-200 rounded-lg","hover:bg-accent/10 hover:text-primary hover:pl-6"),style:{animationDelay:"".concat(50*t,"ms"),animation:u?"slideInRight 0.3s ease-out forwards":"none"},children:e.label},e.href)),(0,a.jsxs)("div",{className:"jsx-5ac20f1ba520252c pt-4 mt-4 border-t border-neutral-200 space-y-3",children:[(0,a.jsx)(i.default,{href:"/login",onClick:()=>g(!1),className:"block w-full text-center py-3 text-neutral-700 font-medium hover:bg-neutral-50 rounded-lg transition-colors",children:"登录"}),(0,a.jsx)(i.default,{href:"/properties",onClick:()=>g(!1),className:"block w-full text-center py-3.5 bg-accent text-primary font-semibold rounded-lg hover:bg-accent-600 transition-colors",children:"浏览房源"})]})]})})]}),u&&(0,a.jsx)("div",{onClick:()=>g(!1),"aria-hidden":"true",className:"jsx-5ac20f1ba520252c lg:hidden fixed inset-0 bg-black/20 backdrop-blur-sm z-40"}),(0,a.jsx)(n(),{id:"5ac20f1ba520252c",children:"@-webkit-keyframes slideInRight{from{opacity:0;-webkit-transform:translatex(-10px);transform:translatex(-10px)}to{opacity:1;-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slideInRight{from{opacity:0;-moz-transform:translatex(-10px);transform:translatex(-10px)}to{opacity:1;-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slideInRight{from{opacity:0;-o-transform:translatex(-10px);transform:translatex(-10px)}to{opacity:1;-o-transform:translatex(0);transform:translatex(0)}}@keyframes slideInRight{from{opacity:0;-webkit-transform:translatex(-10px);-moz-transform:translatex(-10px);-o-transform:translatex(-10px);transform:translatex(-10px)}to{opacity:1;-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}"})]})}},8211:function(e,t,s){"use strict";var a=s(7437),r=s(2265),n=s(2489),l=s(2451),i=s(407);let c=(e,t)=>{let s=new Date(e,t,1),a=new Date(e,t+1,0).getDate(),r=s.getDay(),n=[];for(let e=0;e<r;e++)n.push(null);for(let e=1;e<=a;e++)n.push(e);return n},o=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],d=["日","一","二","三","四","五","六"];t.Z=function(e){let{checkIn:t,checkOut:s,onCheckInChange:x,onCheckOutChange:m,className:h=""}=e,[u,g]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[b,j]=(0,r.useState)(new Date().getMonth()),[N,v]=(0,r.useState)(new Date().getFullYear()),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&(g(!1),p(null))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let w=new Date;w.setHours(0,0,0,0);let k=e=>{let a=new Date(N,b,e).toISOString().split("T")[0];if("checkIn"!==f&&(t||f)){if("checkOut"===f||t&&!s){if(new Date(a)<=new Date(t))return;m(a),g(!1),p(null)}}else s&&new Date(a)>=new Date(s)?(x(a),m("")):x(a),p("checkOut")},S=e=>new Date(N,b,e)<w,D=e=>{if(!t||!e)return!1;let a=new Date(N,b,e),r=new Date(t),n=s?new Date(s):null;return!!n&&a>r&&a<n},C=e=>!!t&&!!e&&new Date(N,b,e).toISOString().split("T")[0]===t,z=e=>!!s&&!!e&&new Date(N,b,e).toISOString().split("T")[0]===s,I=()=>{x(""),m(""),p("checkIn")},E=c(N,b);return(0,a.jsxs)("div",{ref:y,className:"relative ".concat(h),children:[(0,a.jsxs)("div",{className:"flex border bg-white transition-all ".concat(u?"border-primary ring-1 ring-primary":"border-neutral-300 hover:border-neutral-400"),onClick:()=>!u&&g(!0),children:[(0,a.jsxs)("div",{className:"flex-1 px-4 py-3 cursor-pointer border-r border-neutral-200 ".concat("checkIn"===f?"bg-neutral-50":""),onClick:()=>{g(!0),p("checkIn")},children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-neutral-900 uppercase tracking-wide",children:"入住日期"}),(0,a.jsx)("div",{className:"text-sm mt-1 ".concat(t?"text-neutral-900 font-medium":"text-neutral-400"),children:t?new Date(t).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}):"选择日期"})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 py-3 cursor-pointer ".concat("checkOut"===f?"bg-neutral-50":""),onClick:()=>{t&&(g(!0),p("checkOut"))},children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-neutral-900 uppercase tracking-wide",children:"退房日期"}),(0,a.jsx)("div",{className:"text-sm mt-1 ".concat(s?"text-neutral-900 font-medium":"text-neutral-400"),children:s?new Date(s).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}):"选择日期"})]}),(t||s)&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),I()},className:"px-3 hover:bg-neutral-100 flex items-center",children:(0,a.jsx)(n.Z,{size:18,className:"text-neutral-400"})})]}),u&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-neutral-200 shadow-xl z-50 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("button",{onClick:()=>{new Date(N,b-1,1)>=new Date(w.getFullYear(),w.getMonth(),1)&&(0===b?(j(11),v(N-1)):j(b-1))},className:"p-1 hover:bg-neutral-100 rounded-full",children:(0,a.jsx)(l.Z,{size:20})}),(0,a.jsxs)("div",{className:"text-sm font-semibold",children:[N,"年",o[b]]}),(0,a.jsx)("button",{onClick:()=>{11===b?(j(0),v(N+1)):j(b+1)},className:"p-1 hover:bg-neutral-100 rounded-full",children:(0,a.jsx)(i.Z,{size:20})})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:d.map(e=>(0,a.jsx)("div",{className:"text-center text-xs text-neutral-400 py-1",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:E.map((e,t)=>(0,a.jsx)("button",{disabled:null===e||null!==e&&S(e),onClick:()=>e&&k(e),className:"\n                  aspect-square flex items-center justify-center text-sm rounded-full\n                  ".concat(null===e?"invisible":"","\n                  ").concat(null!==e&&S(e)?"text-neutral-300 cursor-not-allowed":"hover:bg-neutral-100 cursor-pointer","\n                  ").concat(null!==e&&C(e)?"bg-neutral-900 text-white hover:bg-neutral-800":"","\n                  ").concat(null!==e&&z(e)?"bg-neutral-900 text-white hover:bg-neutral-800":"","\n                  ").concat(null!==e&&D(e)?"bg-neutral-100":"","\n                "),children:e},t))}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-neutral-200",children:[(0,a.jsx)("button",{onClick:I,className:"text-sm underline text-neutral-600 hover:text-neutral-900",children:"清除日期"}),(0,a.jsx)("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-neutral-900 text-white text-sm font-medium hover:bg-neutral-800",children:"完成"})]})]})]})}},6586:function(e,t,s){"use strict";s.d(t,{_1:function(){return r},wV:function(){return a}});let a=[{id:"1",title:"Cooper St 豪华湖景公寓",location:"5811-55 Cooper St, Toronto, ON M5E 0G1",price:680,priceUnit:"晚",rating:4.9,reviewCount:42,images:["/images/cooper-55-c5e8357d.jpg","/images/cooper-55-e98a880d.jpg","/images/cooper-55-a12c07ee.jpg","/images/cooper-55-c38824ec.jpg","/images/cooper-55-e62f3e96.jpg"],maxGuests:6,area:111,bedrooms:3,bathrooms:3,amenities:["WiFi","空调","洗衣机","厨房","湖景","停车位","24小时安保"],featured:!0,description:"位于多伦多市中心核心地段，享有安大略湖壮丽景色。现代化设计的豪华公寓，3室3卫，1200平方英尺宽敞空间，距离Distillery District仅几步之遥，步行可达湖滨步道。配备高端家具和设施。",minNights:28,monthlyDiscount:20},{id:"2",title:"Simcoe St 高层精品公寓",location:"3709-238 Simcoe St, Toronto, ON M5S 1T4",price:450,priceUnit:"晚",rating:4.8,reviewCount:38,images:["/images/simcoe-238-living.jpg","/images/simcoe-238-kitchen.jpg","/images/simcoe-238-1.jpg","/images/simcoe-238-bath1.jpg"],maxGuests:5,area:102,bedrooms:3,bathrooms:2,amenities:["WiFi","空调","洗衣机","厨房","高层景观","24小时安保","浴缸"],featured:!0,description:"位于多伦多市中心的高层公寓，享有城市天际线美景。现代化装修，3室2卫，1100平方英尺宽敞空间，步行可达多伦多大学、皇家博物馆和各大商业区。",minNights:28,monthlyDiscount:20}],r=e=>a.find(t=>t.id===e)}},function(e){e.O(0,[648,60,878,14,417,276,971,117,744],function(){return e(e.s=5858)}),_N_E=e.O()}]);