(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6775],{604:function(e,t,n){Promise.resolve().then(n.bind(n,4501))},2660:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},401:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},875:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2451:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9322:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1671:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9388:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},9202:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},4938:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},3245:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},1817:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9554:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},9397:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7168:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3247:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8906:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},6595:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},6865:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5805:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},5395:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2489:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8755).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3145:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var s=n(8461),r=n.n(s)},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"notFound")&&n.d(t,{notFound:function(){return s.notFound}}),n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},8461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return c},getImageProps:function(){return l}});let s=n(7043),r=n(5346),a=n(5878),i=s._(n(5084));function l(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!0,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let c=a.Image},4501:function(e,t,n){"use strict";n.d(t,{default:function(){return v}});var s=n(7437),r=n(2265),a=n(3145),i=n(7648),l=n(9376),c=n(2451),o=n(407),u=n(2489),d=n(6595),m=n(8906),h=n(9554),f=n(9397),x=n(6741),p=n(6586),g=n(3447),b=n(806),y=n(1427);function j(e){let{checkIn:t,checkOut:n,onSelectCheckIn:a,onSelectCheckOut:i,onClose:l,pricePerNight:u}=e,[d,m]=(0,r.useState)(new Date),{t:h}=(0,b.Q)(),f=[h("calendar.january")||"January",h("calendar.february")||"February",h("calendar.march")||"March",h("calendar.april")||"April",h("calendar.may")||"May",h("calendar.june")||"June",h("calendar.july")||"July",h("calendar.august")||"August",h("calendar.september")||"September",h("calendar.october")||"October",h("calendar.november")||"November",h("calendar.december")||"December"],x=["S","M","T","W","T","F","S"],p=(e,t,n)=>{let s=new Date(e,t,n),r=new Date;return r.setHours(0,0,0,0),s<r},g=(e,s,r)=>{let a=new Date(e,s,r).toISOString().split("T")[0],i=new Date(e,s,r),l=t?new Date(t):null,c=n?new Date(n):null;return t&&a===t?"start":n&&a===n?"end":l&&c&&i>l&&i<c?"between":"none"},y=(e,s,r)=>{let l=new Date(e,s,r).toISOString().split("T")[0],c=new Date(e,s,r);!t||t&&n?(a(l),i("")):c<=new Date(t)?a(l):i(l)},j=e=>{let t=new Date(d.getFullYear(),d.getMonth()+e,1),n=t.getFullYear(),r=t.getMonth(),a=new Date(n,r+1,0).getDate(),i=new Date(n,r,1).getDay();return(0,s.jsxs)("div",{className:"flex-1 min-w-[280px]",children:[(0,s.jsxs)("h3",{className:"font-semibold text-center mb-4",children:[f[r]," ",n]}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center text-sm mb-2",children:x.map((e,t)=>(0,s.jsx)("div",{className:"text-neutral-500 py-2 text-xs font-medium",children:e},t))}),(0,s.jsxs)("div",{className:"grid grid-cols-7 gap-y-1",children:[Array.from({length:i}).map((e,t)=>(0,s.jsx)("div",{className:"aspect-square"},"empty-".concat(t))),Array.from({length:a}).map((e,t)=>{let a=t+1,i=p(n,r,a),l=g(n,r,a),c="";return"start"===l||"end"===l?c="bg-black text-white rounded-full hover:bg-black":"between"===l&&(c="bg-neutral-100"),(0,s.jsx)("button",{onClick:()=>!i&&y(n,r,a),disabled:i,className:"".concat("aspect-square flex items-center justify-center text-sm relative"," ").concat(i?"text-neutral-300 cursor-not-allowed line-through":"cursor-pointer hover:bg-neutral-100"," ").concat(c," ").concat("start"===l?"rounded-l-full":"end"===l?"rounded-r-full":"between"===l?"":"rounded-full"),children:a},a)})]})]})},v=(()=>{if(!t)return{nights:0,text:h("booking.selectCheckIn")||"Select check-in date"};if(!n){let e=new Date(t);return{nights:0,text:"".concat(h("booking.checkIn")||"Check-in",": ").concat(e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))}}let e=new Date(t),s=new Date(n),r=Math.ceil((s.getTime()-e.getTime())/864e5);return{nights:r,text:"".concat(r," ").concat(r>1?h("common.nights")||"nights":h("common.night")||"night"),range:"".concat(e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," - ").concat(s.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))}})();return v.nights>0&&v.nights,(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:v.text}),v.range&&(0,s.jsx)("p",{className:"text-neutral-600 mt-1",children:v.range}),!n&&(0,s.jsx)("p",{className:"text-neutral-500 mt-1 text-sm",children:h("booking.selectCheckOut")||"Select check-out date"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("button",{onClick:()=>m(new Date(d.getFullYear(),d.getMonth()-1)),className:"p-2 hover:bg-neutral-100 rounded-full",children:(0,s.jsx)(c.Z,{size:20})}),(0,s.jsx)("button",{onClick:()=>m(new Date(d.getFullYear(),d.getMonth()+1)),className:"p-2 hover:bg-neutral-100 rounded-full",children:(0,s.jsx)(o.Z,{size:20})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-8",children:[j(0),j(1)]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-8 pt-4 border-t border-neutral-200",children:[(0,s.jsx)("button",{onClick:()=>{a(""),i("")},className:"text-sm font-medium underline",children:h("common.clear")||"Clear dates"}),(0,s.jsx)("button",{onClick:l,disabled:!t||!n,className:"px-6 py-3 bg-black text-white font-medium rounded-lg hover:bg-neutral-800 disabled:bg-neutral-300 disabled:cursor-not-allowed transition-colors",children:h("common.save")||"Save"})]})]})}function v(e){let{propertyId:t}=e,n=(0,l.useRouter)(),o=(0,l.useSearchParams)(),v=(0,p._1)(t),{t:w,locale:k}=(0,b.Q)(),{isAuthenticated:N,user:S}=(0,y.aC)(),[C,D]=(0,r.useState)(o.get("checkIn")||""),[Z,M]=(0,r.useState)(o.get("checkOut")||""),[z,I]=(0,r.useState)(parseInt(o.get("adults")||"1")),[A,P]=(0,r.useState)(parseInt(o.get("children")||"0")),[F,T]=(0,r.useState)(parseInt(o.get("infants")||"0")),[O,E]=(0,r.useState)(parseInt(o.get("pets")||"0")),[L,U]=(0,r.useState)(!1),[q,G]=(0,r.useState)(!1),[_,R]=(0,r.useState)(!1);if(!v)return(0,s.jsx)("main",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-neutral-500",children:w("errors.propertyNotFound")||"Property not found"}),(0,s.jsx)(i.default,{href:"/properties",className:"text-primary mt-4 inline-block underline",children:w("properties.viewAll")||"Back to properties"})]})});let B=(0,g.mA)(v,k),H=(()=>{if(!C||!Z)return 0;let e=new Date(C),t=Math.ceil((new Date(Z).getTime()-e.getTime())/864e5);return t>0?t:0})(),J=H>=28,W=J&&v.monthlyDiscount?(100-v.monthlyDiscount)/100:1,$=Math.round(v.price*W),Q=H*$,V=H>0?Math.round(.13*Q):0,Y=Q+V,K=e=>e?new Date(e).toLocaleDateString("zh"===k?"zh-CN":"fr"===k?"fr-FR":"en-US",{month:"long",day:"numeric"}):"",X=()=>N&&S?{guestName:S.name||"".concat(S.firstName||""," ").concat(S.lastName||"").trim()||"Guest",guestEmail:S.email||"",guestPhone:S.phone||"",userId:S.id}:{guestName:o.get("name")||"Guest",guestEmail:o.get("email")||"",guestPhone:o.get("phone")||"",userId:void 0};return(0,s.jsxs)("main",{className:"min-h-screen bg-white pb-32",children:[(0,s.jsx)("nav",{className:"sticky top-0 z-40 bg-white border-b border-neutral-200",children:(0,s.jsx)(x.W2,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsx)("button",{onClick:()=>n.back(),className:"p-2 -ml-2 hover:bg-neutral-100 rounded-full transition-colors",children:(0,s.jsx)(c.Z,{size:24})}),(0,s.jsx)("h1",{className:"text-lg font-semibold",children:w("checkout.reviewAndContinue")||"Review and continue"}),(0,s.jsx)("button",{onClick:()=>n.push("/properties"),className:"p-2 -mr-2 hover:bg-neutral-100 rounded-full transition-colors",children:(0,s.jsx)(u.Z,{size:24})})]})})}),(0,s.jsx)(x.W2,{className:"py-6",children:(0,s.jsxs)("div",{className:"max-w-xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-6 p-4 border border-neutral-200 rounded-xl",children:[(0,s.jsx)("div",{className:"relative w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden",children:(0,s.jsx)(a.default,{src:v.images[0],alt:B,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h2",{className:"font-medium text-neutral-900 leading-tight line-clamp-2",children:B}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mt-1.5",children:[(0,s.jsx)(d.Z,{size:14,className:"text-black fill-black"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:v.rating}),(0,s.jsxs)("span",{className:"text-sm text-neutral-500",children:["(",v.reviewCount," ",w("properties.reviews")||"reviews",")"]})]}),(0,s.jsx)("p",{className:"text-sm text-neutral-500 mt-1 truncate",children:v.location})]})]}),(0,s.jsxs)("div",{className:"space-y-0 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between py-4 border-t border-neutral-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:w("booking.dates")||"Dates"}),(0,s.jsx)("p",{className:"text-neutral-600 mt-0.5",children:(()=>{if(!C||!Z)return w("booking.selectDates")||"Select dates";let e=new Date(C),t=new Date(Z);return"".concat(e.toLocaleDateString("zh"===k?"zh-CN":"fr"===k?"fr-FR":"en-US",{month:"short",day:"numeric"})," - ").concat(t.toLocaleDateString("zh"===k?"zh-CN":"fr"===k?"fr-FR":"en-US",{month:"short",day:"numeric"}),", ").concat(t.getFullYear())})()}),J&&v.monthlyDiscount&&(0,s.jsx)("p",{className:"text-sm text-rose-600 font-medium mt-1",children:w("properties.monthlyDiscount",{percent:v.monthlyDiscount})})]}),(0,s.jsx)("button",{onClick:()=>U(!0),className:"px-4 py-2 text-sm font-medium underline rounded-lg hover:bg-neutral-50 transition-colors",children:w("common.change")||"Change"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-4 border-t border-b border-neutral-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:w("booking.guests")||"Guests"}),(0,s.jsx)("p",{className:"text-neutral-600 mt-0.5",children:(()=>{let e=[],t=z+A;return e.push("".concat(t," ").concat(1===t?w("search.guest")||"guest":w("search.guests")||"guests")),F>0&&e.push("".concat(F," ").concat(1===F?w("search.infant")||"infant":w("search.infants")||"infants")),O>0&&e.push("".concat(O," ").concat(1===O?w("search.pet")||"pet":w("search.pets")||"pets")),e.join(", ")})()})]}),(0,s.jsx)("button",{onClick:()=>G(!0),className:"px-4 py-2 text-sm font-medium underline rounded-lg hover:bg-neutral-50 transition-colors",children:w("common.change")||"Change"})]})]}),(0,s.jsx)("div",{className:"py-4 border-b border-neutral-200 mb-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 text-rose-500 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:w("checkout.freeCancellation")||"Free cancellation for 24 hours"}),(0,s.jsxs)("p",{className:"text-neutral-600 mt-1 text-sm",children:[w("checkout.freeCancellationDesc",{date:(()=>{if(!C)return"";let e=new Date(C),t=new Date(new Date().getTime()+864e5),n=new Date(e);return n.setDate(n.getDate()-1),K((t<n?t:n).toISOString().split("T")[0])})()})||"After that, cancel before check-in for a partial refund."," ",(0,s.jsx)(i.default,{href:"/cancellation-policy",className:"underline font-medium",children:w("checkout.fullPolicy")||"Full policy"})]})]})]})}),(0,s.jsxs)("div",{className:"py-4 border-b border-neutral-200 mb-6",children:[(0,s.jsx)("h3",{className:"font-medium mb-3",children:w("checkout.groundRules")||"Ground rules"}),(0,s.jsx)("p",{className:"text-neutral-600 text-sm mb-3",children:w("checkout.groundRulesDesc")||"We ask every guest to remember a few simple things about what makes a great stay."}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-neutral-600",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-1 bg-neutral-400 rounded-full"}),w("checkout.followHouseRules")||"Follow the house rules"]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-1 bg-neutral-400 rounded-full"}),w("checkout.treatHome")||"Treat your home like your own"]})]})]}),(0,s.jsxs)("div",{className:"py-4 border-b border-neutral-200 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"font-medium",children:w("booking.priceSummary")||"Price Summary"}),(0,s.jsx)("button",{onClick:()=>R(!_),className:"text-sm font-medium underline",children:_?w("common.hide")||"Hide":w("common.show")||"Show"})]}),_&&(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{className:"text-neutral-600",children:["$",$.toLocaleString()," ",J?w("property.monthlyPrice")||"CAD / month":w("property.perNight")||"CAD / night"," x ",H," ",1===H?w("common.night")||"night":w("common.nights")||"nights"]}),(0,s.jsxs)("span",{children:["$",Q.toLocaleString()," CAD"]})]}),J&&v.monthlyDiscount&&(0,s.jsxs)("div",{className:"flex justify-between text-rose-600",children:[(0,s.jsx)("span",{children:w("properties.monthlyDiscount",{percent:v.monthlyDiscount})}),(0,s.jsxs)("span",{children:["-$",Math.round(v.price*H-Q).toLocaleString()," CAD"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-neutral-600",children:w("booking.taxHST")||"Taxes (13% HST)"}),(0,s.jsxs)("span",{children:["$",V.toLocaleString()," CAD"]})]}),(0,s.jsx)(x.iz,{className:"my-3"}),(0,s.jsxs)("div",{className:"flex justify-between font-semibold text-base",children:[(0,s.jsxs)("span",{children:[w("booking.total")||"Total"," ",(0,s.jsx)("u",{children:"CAD"})]}),(0,s.jsxs)("span",{children:["$",Y.toLocaleString()," CAD"]})]})]}),!_&&(0,s.jsxs)("p",{className:"text-neutral-600",children:[(0,s.jsxs)("span",{className:"font-semibold",children:["$",Y.toLocaleString()," CAD"]})," ",w("checkout.totalBeforeTaxes")||"total before taxes"]})]})]})}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 z-50",children:(0,s.jsx)(x.W2,{children:(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsx)("button",{onClick:()=>{if(!C||!Z){U(!0);return}let e=X();if(!e.guestName||!e.guestEmail){n.push("/login?redirect=/checkout/".concat(t));return}let s=new URLSearchParams;s.set("checkIn",C),s.set("checkOut",Z),s.set("amount",Y.toString()),s.set("guestName",e.guestName),s.set("guestEmail",e.guestEmail),s.set("adults",z.toString()),s.set("children",A.toString()),s.set("infants",F.toString()),s.set("pets",O.toString()),e.guestPhone&&s.set("guestPhone",e.guestPhone),n.push("/payment/".concat(t,"?").concat(s.toString()))},className:"w-full py-4 bg-black hover:bg-neutral-800 disabled:bg-neutral-300 text-white font-medium text-lg rounded-xl transition-colors",children:w("checkout.reviewAndContinue")||"Review and continue"}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500 text-center mt-3",children:[w("checkout.agreement")||"By selecting the button below, I agree to the"," ",(0,s.jsx)(i.default,{href:"/terms",className:"underline",children:w("footer.terms")||"booking terms"}),","," ",(0,s.jsx)(i.default,{href:"/cancellation-policy",className:"underline",children:w("checkout.cancellationPolicy")||"cancellation policy"}),","," ",w("common.and")||"and"," ",(0,s.jsx)(i.default,{href:"/privacy",className:"underline",children:w("footer.privacy")||"privacy policy"}),"."]})]})})}),L&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-end sm:items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white w-full max-w-3xl rounded-t-2xl sm:rounded-2xl p-6 max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,s.jsx)("button",{onClick:()=>U(!1),className:"p-2 -ml-2 hover:bg-neutral-100 rounded-full",children:(0,s.jsx)(u.Z,{size:24})})}),(0,s.jsx)(j,{checkIn:C,checkOut:Z,onSelectCheckIn:D,onSelectCheckOut:M,onClose:()=>U(!1),pricePerNight:$})]})}),q&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-end sm:items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white w-full max-w-lg rounded-t-2xl sm:rounded-2xl p-6 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:w("checkout.changeGuests")||"Change guests"}),(0,s.jsx)("button",{onClick:()=>G(!1),className:"p-2 hover:bg-neutral-100 rounded-full",children:(0,s.jsx)(u.Z,{size:24})})]}),(0,s.jsx)("p",{className:"text-sm text-neutral-600 mb-6",children:w("checkout.maxGuestsInfo",{count:v.maxGuests})||"This place has a maximum of ".concat(v.maxGuests," guests, not including infants.")}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:w("search.adults")||"Adults"}),(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:w("search.ages13Plus")||"Ages 13+"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>I(Math.max(1,z-1)),disabled:z<=1,className:"w-8 h-8 rounded-full border border-neutral-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:border-neutral-400 transition-colors",children:(0,s.jsx)(h.Z,{size:16})}),(0,s.jsx)("span",{className:"w-6 text-center font-medium",children:z}),(0,s.jsx)("button",{onClick:()=>I(Math.min(v.maxGuests-A,z+1)),disabled:z+A>=v.maxGuests,className:"w-8 h-8 rounded-full border border-neutral-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:border-neutral-400 transition-colors",children:(0,s.jsx)(f.Z,{size:16})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:w("search.children")||"Children"}),(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:w("search.ages2To12")||"Ages 2-12"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>P(Math.max(0,A-1)),disabled:A<=0,className:"w-8 h-8 rounded-full border border-neutral-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:border-neutral-400 transition-colors",children:(0,s.jsx)(h.Z,{size:16})}),(0,s.jsx)("span",{className:"w-6 text-center font-medium",children:A}),(0,s.jsx)("button",{onClick:()=>P(Math.min(v.maxGuests-z,A+1)),disabled:z+A>=v.maxGuests,className:"w-8 h-8 rounded-full border border-neutral-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:border-neutral-400 transition-colors",children:(0,s.jsx)(f.Z,{size:16})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:w("search.infants")||"Infants"}),(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:w("search.under2")||"Under 2"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>T(Math.max(0,F-1)),disabled:F<=0,className:"w-8 h-8 rounded-full border border-neutral-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:border-neutral-400 transition-colors",children:(0,s.jsx)(h.Z,{size:16})}),(0,s.jsx)("span",{className:"w-6 text-center font-medium",children:F}),(0,s.jsx)("button",{onClick:()=>T(F+1),className:"w-8 h-8 rounded-full border border-neutral-300 flex items-center justify-center hover:border-neutral-400 transition-colors",children:(0,s.jsx)(f.Z,{size:16})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:w("search.pets")||"Pets"}),(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:(0,s.jsx)(i.default,{href:"/service-animals",className:"underline",children:w("search.serviceAnimal")||"Bringing a service animal?"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>E(Math.max(0,O-1)),disabled:O<=0,className:"w-8 h-8 rounded-full border border-neutral-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:border-neutral-400 transition-colors",children:(0,s.jsx)(h.Z,{size:16})}),(0,s.jsx)("span",{className:"w-6 text-center font-medium",children:O}),(0,s.jsx)("button",{onClick:()=>E(O+1),className:"w-8 h-8 rounded-full border border-neutral-300 flex items-center justify-center hover:border-neutral-400 transition-colors",children:(0,s.jsx)(f.Z,{size:16})})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-8 pt-4 border-t border-neutral-200",children:[(0,s.jsx)("button",{onClick:()=>G(!1),className:"text-sm font-medium underline",children:w("common.cancel")||"Cancel"}),(0,s.jsx)("button",{onClick:()=>G(!1),className:"px-6 py-3 bg-black text-white font-medium rounded-lg hover:bg-neutral-800 transition-colors",children:w("common.save")||"Save"})]})]})})]})}},3447:function(e,t,n){"use strict";function s(e,t){switch(t){case"zh":return e.titleZh||e.title;case"fr":return e.titleFr||e.title;default:return e.title}}function r(e,t){switch(t){case"zh":return e.descriptionZh||e.description;case"fr":return e.descriptionFr||e.description;default:return e.description}}n.d(t,{mA:function(){return s},oe:function(){return r}}),n(7437),n(3145),n(7648),n(806)},1427:function(e,t,n){"use strict";n.d(t,{Qm:function(){return s.Qm},aC:function(){return s.aC},hx:function(){return s.hx}});var s=n(1579)},1579:function(e,t,n){"use strict";n.d(t,{Qm:function(){return h},UserProvider:function(){return u},aC:function(){return d},aF:function(){return d},hx:function(){return m}});var s=n(7437),r=n(2265),a=n(605);let i={language:"zh",currency:"CAD",notifications:{email:!0,sms:!0,marketing:!1}},l="stayneos_auth_token",c="stayneos_user_data",o=(0,r.createContext)(void 0);function u(e){let{children:t}=e,{data:n,status:u}=(0,a.useSession)(),[d,m]=(0,r.useState)(null),[h,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(()=>{try{let e=localStorage.getItem(c),t=localStorage.getItem(l);if(e&&t){let t=JSON.parse(e);m(t)}}catch(e){console.error("Error loading user from storage:",e),localStorage.removeItem(c),localStorage.removeItem(l)}finally{f(!1)}})()},[]),(0,r.useEffect)(()=>{let e=e=>{if(e.key===c){if(e.newValue)try{let t=JSON.parse(e.newValue);m(t)}catch(e){m(null)}else m(null)}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,r.useEffect)(()=>{if("authenticated"===u&&(null==n?void 0:n.user)){let e=n.user.name||"",t=e.split(" "),s=t[0]||"",r=t.slice(1).join(" ")||"",a={id:n.user.id,firstName:s,lastName:r,name:e,email:n.user.email||"",image:n.user.image||void 0,avatar:n.user.image||void 0,phone:"",dateOfBirth:"",nationality:"",preferences:i,memberSince:new Date().toISOString().split("T")[0],memberLevel:"普通会员",role:n.user.role||"USER"};m(a),localStorage.setItem(c,JSON.stringify(a))}else"unauthenticated"!==u||localStorage.getItem(l)||m(null)},[n,u]);let x=(0,r.useCallback)(async e=>{f(!0);try{m(t=>{if(!t)return null;let n={...t,...e};return localStorage.setItem(c,JSON.stringify(n)),n}),await new Promise(e=>setTimeout(e,500))}finally{f(!1)}},[]),p=(0,r.useCallback)(async e=>{f(!0);try{m(t=>{if(!t)return null;let n={...t,preferences:{...t.preferences,...e,notifications:{...t.preferences.notifications,...e.notifications}}};return localStorage.setItem(c,JSON.stringify(n)),e.language&&(window.dispatchEvent(new CustomEvent("localeChange")),localStorage.setItem("preferred-locale",e.language)),n}),await new Promise(e=>setTimeout(e,300))}finally{f(!1)}},[]),g=(0,r.useCallback)(async e=>{f(!0);try{m(t=>{if(!t)return null;let n={...t,avatar:e,image:e};return localStorage.setItem(c,JSON.stringify(n)),n}),await new Promise(e=>setTimeout(e,500))}finally{f(!1)}},[]),b=(0,r.useCallback)(async()=>{localStorage.removeItem(l),localStorage.removeItem(c),m(null),window.dispatchEvent(new CustomEvent("localStorageChange")),await (0,a.signOut)({callbackUrl:"/"})},[]),y=(0,r.useCallback)(async()=>{try{let e=localStorage.getItem(l);if(!e)return;let t=await fetch("/api/auth/session",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();m(t=>{if(!t)return null;let n={...t,...e};return localStorage.setItem(c,JSON.stringify(n)),n})}else 401===t.status&&await b()}catch(e){console.error("Error refreshing user:",e)}},[b]);return(0,r.useEffect)(()=>{if(!localStorage.getItem(l))return;let e=setInterval(()=>{y()},3e5);return()=>clearInterval(e)},[y]),(0,s.jsx)(o.Provider,{value:{user:d,isLoading:h||"loading"===u,isAuthenticated:!!d,updateProfile:x,updatePreferences:p,updateAvatar:g,logout:b,refreshUser:y},children:t})}function d(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}function m(e){if(!e)return"#3B82F6";let t=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"],n=0;for(let t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);return t[Math.abs(n)%t.length]}function h(e){if(!e)return"?";let t=e.trim().split(/\s+/);return 1===t.length?t[0].slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()}},6586:function(e,t,n){"use strict";n.d(t,{_1:function(){return r},wV:function(){return s}});let s=[{id:"1",title:"Cooper St Luxury Lakeview Apartment",titleZh:"Cooper St 豪华湖景公寓",titleFr:"Appartement de luxe avec vue sur le lac Cooper St",location:"55 Cooper St, Toronto, ON M5E 0G1",price:680,priceUnit:"晚",rating:4.9,reviewCount:42,images:["/images/cooper-55-c5e8357d.jpg","/images/cooper-55-e98a880d.jpg","/images/cooper-55-a12c07ee.jpg","/images/cooper-55-c38824ec.jpg","/images/cooper-55-e62f3e96.jpg"],maxGuests:6,area:111,bedrooms:3,bathrooms:3,amenities:["WiFi","空调","洗衣机","厨房","湖景","停车位","24小时安保"],featured:!0,description:"Located in the heart of downtown Toronto with stunning views of Lake Ontario. This modern luxury apartment features 3 bedrooms and 3 bathrooms in a spacious 1,200 sq ft space. Just steps from the Distillery District and walking distance to the waterfront trail. Equipped with high-end furniture and amenities.",descriptionZh:"位于多伦多市中心核心地段，享有安大略湖壮丽景色。现代化设计的豪华公寓，3室3卫，1200平方英尺宽敞空间，距离Distillery District仅几步之遥，步行可达湖滨步道。配备高端家具和设施。",descriptionFr:"Situ\xe9 au cœur du centre-ville de Toronto avec une vue imprenable sur le lac Ontario. Cet appartement de luxe moderne comprend 3 chambres et 3 salles de bains dans un espace spacieux de 1 200 pieds carr\xe9s. \xc0 quelques pas du Distillery District et \xe0 distance de marche de la promenade en bord de mer. \xc9quip\xe9 de meubles et d'\xe9quipements haut de gamme.",minNights:28,monthlyDiscount:20},{id:"2",title:"Simcoe St High-rise Boutique Apartment",titleZh:"Simcoe St 高层精品公寓",titleFr:"Appartement boutique en haute altitude Simcoe St",location:"238 Simcoe St, Toronto, ON M5S 1T4",price:450,priceUnit:"晚",rating:4.8,reviewCount:38,images:["/images/simcoe-238-living.jpg","/images/simcoe-238-kitchen.jpg","/images/simcoe-238-1.jpg","/images/simcoe-238-bath1.jpg"],maxGuests:5,area:102,bedrooms:3,bathrooms:2,amenities:["WiFi","空调","洗衣机","厨房","高层景观","24小时安保","浴缸"],featured:!0,description:"A high-rise apartment in downtown Toronto offering beautiful city skyline views. Modern decor with 3 bedrooms and 2 bathrooms in a spacious 1,100 sq ft space. Walking distance to University of Toronto, Royal Ontario Museum, and major business districts.",descriptionZh:"位于多伦多市中心的高层公寓，享有城市天际线美景。现代化装修，3室2卫，1100平方英尺宽敞空间，步行可达多伦多大学、皇家博物馆和各大商业区。",descriptionFr:"Un appartement en haute altitude au centre-ville de Toronto offrant une belle vue sur la ligne d'horizon de la ville. D\xe9cor moderne avec 3 chambres et 2 salles de bains dans un espace spacieux de 1 100 pieds carr\xe9s. \xc0 distance de marche de l'Universit\xe9 de Toronto, du Mus\xe9e royal de l'Ontario et des principaux quartiers d'affaires.",minNights:28,monthlyDiscount:20}],r=e=>s.find(t=>t.id===e)}},function(e){e.O(0,[7648,863,5878,605,5883,8276,2971,2117,1744],function(){return e(e.s=604)}),_N_E=e.O()}]);