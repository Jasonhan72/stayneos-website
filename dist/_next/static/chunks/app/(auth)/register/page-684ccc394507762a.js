(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{9635:function(e,r,t){Promise.resolve().then(t.t.bind(t,5878,23)),Promise.resolve().then(t.t.bind(t,2972,23)),Promise.resolve().then(t.bind(t,1323))},8755:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var a=t(2265);let s=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()},n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase()),l=e=>{let r=o(e);return r.charAt(0).toUpperCase()+r.slice(1)};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0;return!1},d=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:r,...i,width:n,height:n,stroke:t,strokeWidth:l?24*Number(o)/Number(n):o,className:s("lucide",d),...!u&&!c(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(u)?u:[u]])}),u=(e,r)=>{let t=(0,a.forwardRef)((t,o)=>{let{className:i,...c}=t;return(0,a.createElement)(d,{ref:o,iconNode:r,className:s("lucide-".concat(n(l(e))),"lucide-".concat(e),i),...c})});return t.displayName=l(e),t}},9322:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(8755).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7769:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(8755).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2208:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(8755).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1817:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(8755).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6337:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(8755).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9345:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(8755).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},2369:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(8755).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"notFound")&&t.d(r,{notFound:function(){return a.notFound}}),t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},1323:function(e,r,t){"use strict";t.d(r,{RegisterForm:function(){return p}});var a=t(7437),s=t(2265),n=t(9376),o=t(7648),l=t(9322),i=t(2369),c=t(9345),d=t(6337),u=t(7769),m=t(2208),h=t(6334);function p(e){let{onSuccess:r}=e,t=(0,n.useRouter)(),[p,f]=(0,s.useState)(""),[x,y]=(0,s.useState)(""),[g,w]=(0,s.useState)(""),[b,v]=(0,s.useState)(""),[j,N]=(0,s.useState)(!1),[k,Z]=(0,s.useState)(!1),[P,C]=(0,s.useState)({}),[S,z]=(0,s.useState)(!1),[E,F]=(0,s.useState)(""),A=e=>{let r={};return(!e||"name"===e)&&(p.trim()?p.trim().length<2&&(r.name="姓名至少需要2个字符"):r.name="请输入姓名"),e&&"email"!==e||(x.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x)||(r.email="请输入有效的邮箱地址"):r.email="请输入邮箱地址"),e&&"password"!==e||(g?g.length<6?r.password="密码至少需要6位字符":/(?=.*[a-zA-Z])(?=.*\d)/.test(g)||(r.password="密码需要包含字母和数字"):r.password="请输入密码"),e&&"confirmPassword"!==e||(b?g!==b&&(r.confirmPassword="两次输入的密码不一致"):r.confirmPassword="请确认密码"),C(e=>({...e,...r})),0===Object.keys(r).length},M=async e=>{if(e.preventDefault(),F(""),A()){z(!0);try{let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p,email:x,password:g})}),a=await e.json();if(!e.ok)throw Error(a.message||"注册失败");r?r():t.push("/login?registered=true")}catch(e){F(e instanceof Error?e.message:"注册失败，请重试")}finally{z(!1)}}};return(0,a.jsxs)("form",{onSubmit:M,className:"w-full max-w-md space-y-5",children:[E&&(0,a.jsxs)("div",{className:"p-4 bg-error-50 border border-error-200 rounded-lg flex items-start gap-3 animate-fade-in",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 text-error shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-sm text-error-800",children:E})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"name",className:"form-label",children:"姓名"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsx)("input",{id:"name",type:"text",value:p,onChange:e=>{f(e.target.value),P.name&&C(e=>({...e,name:""}))},onBlur:()=>A("name"),className:"form-input !pl-12 ".concat(P.name?"error":""),placeholder:"请输入您的姓名",disabled:S})]}),P.name&&(0,a.jsx)("p",{className:"form-error",children:P.name})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"email",className:"form-label",children:"邮箱地址"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400",children:(0,a.jsx)(c.Z,{className:"w-5 h-5"})}),(0,a.jsx)("input",{id:"email",type:"email",value:x,onChange:e=>{y(e.target.value),P.email&&C(e=>({...e,email:""}))},onBlur:()=>A("email"),className:"form-input !pl-12 ".concat(P.email?"error":""),placeholder:"请输入您的邮箱",disabled:S})]}),P.email&&(0,a.jsx)("p",{className:"form-error",children:P.email})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"password",className:"form-label",children:"密码"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})}),(0,a.jsx)("input",{id:"password",type:j?"text":"password",value:g,onChange:e=>{w(e.target.value),P.password&&C(e=>({...e,password:""}))},onBlur:()=>A("password"),className:"form-input !pl-12 !pr-12 ".concat(P.password?"error":""),placeholder:"请设置密码（至少6位，含字母和数字）",disabled:S}),(0,a.jsx)("button",{type:"button",onClick:()=>N(!j),className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":j?"隐藏密码":"显示密码",children:j?(0,a.jsx)(u.Z,{className:"w-5 h-5"}):(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]}),P.password?(0,a.jsx)("p",{className:"form-error",children:P.password}):(0,a.jsx)("p",{className:"form-help",children:"密码需包含至少6个字符，包括字母和数字"})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"确认密码"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})}),(0,a.jsx)("input",{id:"confirmPassword",type:k?"text":"password",value:b,onChange:e=>{v(e.target.value),P.confirmPassword&&C(e=>({...e,confirmPassword:""}))},onBlur:()=>A("confirmPassword"),className:"form-input !pl-12 !pr-12 ".concat(P.confirmPassword?"error":""),placeholder:"请再次输入密码",disabled:S}),(0,a.jsx)("button",{type:"button",onClick:()=>Z(!k),className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":k?"隐藏密码":"显示密码",children:k?(0,a.jsx)(u.Z,{className:"w-5 h-5"}):(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]}),P.confirmPassword&&(0,a.jsx)("p",{className:"form-error",children:P.confirmPassword})]}),(0,a.jsx)(h.default,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,isLoading:S,children:S?"注册中...":"注册"}),(0,a.jsx)("div",{className:"text-center pt-2",children:(0,a.jsxs)("p",{className:"text-sm text-neutral-600",children:["已有账号？"," ",(0,a.jsx)(o.default,{href:"/login",className:"text-primary font-semibold hover:text-accent transition-colors",children:"立即登录"})]})})]})}},6334:function(e,r,t){"use strict";t.d(r,{default:function(){return n}});var a=t(7437),s=t(1817);function n(e){let{children:r,variant:t="primary",size:n="md",isLoading:o=!1,disabled:l=!1,fullWidth:i=!1,onClick:c,type:d="button",className:u="",leftIcon:m,rightIcon:h}=e;return(0,a.jsxs)("button",{type:d,onClick:c,disabled:l||o,"aria-disabled":l||o,"aria-busy":o,className:"\n        ".concat("\n    inline-flex items-center justify-center font-medium transition-all duration-200\n    focus:outline-none focus:ring-2 focus:ring-offset-2\n    disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none\n  ","\n        ").concat({primary:"\n      bg-accent text-primary\n      hover:bg-accent-600 hover:shadow-accent hover:-translate-y-0.5\n      focus:ring-accent\n      font-semibold\n    ",secondary:"\n      bg-primary text-white\n      hover:bg-primary-700 hover:shadow-primary hover:-translate-y-0.5\n      focus:ring-primary\n      font-semibold\n    ",accent:"\n      bg-accent-500 text-white\n      hover:bg-accent-600 hover:shadow-accent hover:-translate-y-0.5\n      focus:ring-accent-500\n      font-semibold\n    ",outline:"\n      border-[1.5px] border-neutral-300 bg-transparent text-neutral-700\n      hover:bg-neutral-50 hover:border-neutral-400\n      focus:ring-neutral-400\n      font-medium\n    ",ghost:"\n      bg-transparent text-neutral-600\n      hover:bg-neutral-100 hover:text-neutral-900\n      focus:ring-neutral-300\n      font-medium\n    ",danger:"\n      bg-error text-white\n      hover:bg-red-700 hover:shadow-lg hover:shadow-red-500/30 hover:-translate-y-0.5\n      focus:ring-error\n      font-semibold\n    "}[t],"\n        ").concat({sm:"px-4 py-2 text-sm gap-1.5 min-h-[36px] rounded-md",md:"px-6 py-3 text-sm gap-2 min-h-[44px] rounded-lg",lg:"px-8 py-4 text-base gap-2.5 min-h-[56px] rounded-xl",icon:"p-2.5 min-w-[44px] min-h-[44px] rounded-lg"}[n],"\n        ").concat(i?"w-full":"","\n        ").concat(u,"\n      "),children:[o&&(0,a.jsx)(s.Z,{size:{sm:16,md:20,lg:24,icon:20}[n],className:"animate-spin shrink-0","aria-hidden":"true"}),!o&&m&&(0,a.jsx)("span",{className:"shrink-0",children:m}),r&&(0,a.jsx)("span",{children:r}),!o&&h&&(0,a.jsx)("span",{className:"shrink-0",children:h})]})}}},function(e){e.O(0,[648,878,971,117,744],function(){return e(e.s=9635)}),_N_E=e.O()}]);