(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{460:function(e,t,r){Promise.resolve().then(r.t.bind(r,5878,23)),Promise.resolve().then(r.t.bind(r,2972,23)),Promise.resolve().then(r.bind(r,2406))},8755:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(2265);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},u=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:u="",children:d,iconNode:m,...h}=e;return(0,n.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:i?24*Number(o)/Number(s):o,className:a("lucide",u),...!d&&!c(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let r=(0,n.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,n.createElement)(u,{ref:o,iconNode:t,className:a("lucide-".concat(s(i(e))),"lucide-".concat(e),l),...c})});return r.displayName=i(e),r}},9322:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(8755).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7769:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(8755).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(8755).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(8755).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6337:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(8755).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9345:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(8755).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},2406:function(e,t,r){"use strict";r.d(t,{LoginForm:function(){return h}});var n=r(7437),a=r(2265),s=r(9376),o=r(7648),i=r(9322),l=r(9345),c=r(6337),u=r(7769),d=r(2208),m=r(6334);function h(e){let{onSuccess:t}=e,r=(0,s.useRouter)(),[h,f]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[y,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)({}),[w,j]=(0,a.useState)(!1),[N,k]=(0,a.useState)(""),Z=()=>{let e={};return h.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)||(e.email="请输入有效的邮箱地址"):e.email="请输入邮箱地址",p?p.length<6&&(e.password="密码至少需要6位字符"):e.password="请输入密码",v(e),0===Object.keys(e).length},C=async e=>{if(e.preventDefault(),k(""),Z()){j(!0);try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,password:p})}),n=await e.json();if(!e.ok)throw Error(n.message||"登录失败");t?t():(r.push("/"),r.refresh())}catch(e){k(e instanceof Error?e.message:"登录失败，请重试")}finally{j(!1)}}};return(0,n.jsxs)("form",{onSubmit:C,className:"w-full max-w-md space-y-6",children:[N&&(0,n.jsxs)("div",{className:"p-4 bg-error-50 border border-error-200 rounded-lg flex items-start gap-3 animate-fade-in",children:[(0,n.jsx)(i.Z,{className:"w-5 h-5 text-error shrink-0 mt-0.5"}),(0,n.jsx)("span",{className:"text-sm text-error-800",children:N})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"email",className:"form-label",children:"邮箱地址"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400",children:(0,n.jsx)(l.Z,{className:"w-5 h-5"})}),(0,n.jsx)("input",{id:"email",type:"email",value:h,onChange:e=>{f(e.target.value),b.email&&v(e=>({...e,email:""}))},className:"form-input !pl-12 ".concat(b.email?"error":""),placeholder:"请输入您的邮箱",disabled:w})]}),b.email&&(0,n.jsx)("p",{className:"form-error",children:b.email})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("label",{htmlFor:"password",className:"form-label mb-0",children:"密码"}),(0,n.jsx)(o.default,{href:"/forgot-password",className:"text-sm text-primary hover:text-accent transition-colors",children:"忘记密码？"})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400",children:(0,n.jsx)(c.Z,{className:"w-5 h-5"})}),(0,n.jsx)("input",{id:"password",type:y?"text":"password",value:p,onChange:e=>{x(e.target.value),b.password&&v(e=>({...e,password:""}))},className:"form-input !pl-12 !pr-12 ".concat(b.password?"error":""),placeholder:"请输入您的密码",disabled:w}),(0,n.jsx)("button",{type:"button",onClick:()=>g(!y),className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":y?"隐藏密码":"显示密码",children:y?(0,n.jsx)(u.Z,{className:"w-5 h-5"}):(0,n.jsx)(d.Z,{className:"w-5 h-5"})})]}),b.password&&(0,n.jsx)("p",{className:"form-error",children:b.password})]}),(0,n.jsx)(m.default,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,isLoading:w,children:w?"登录中...":"登录"}),(0,n.jsx)("div",{className:"text-center pt-2",children:(0,n.jsxs)("p",{className:"text-sm text-neutral-600",children:["还没有账号？"," ",(0,n.jsx)(o.default,{href:"/register",className:"text-primary font-semibold hover:text-accent transition-colors",children:"立即注册"})]})})]})}},6334:function(e,t,r){"use strict";r.d(t,{default:function(){return s}});var n=r(7437),a=r(1817);function s(e){let{children:t,variant:r="primary",size:s="md",isLoading:o=!1,disabled:i=!1,fullWidth:l=!1,onClick:c,type:u="button",className:d="",leftIcon:m,rightIcon:h}=e;return(0,n.jsxs)("button",{type:u,onClick:c,disabled:i||o,"aria-disabled":i||o,"aria-busy":o,className:"\n        ".concat("\n    inline-flex items-center justify-center font-medium transition-all duration-200\n    focus:outline-none focus:ring-2 focus:ring-offset-2\n    disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none\n  ","\n        ").concat({primary:"\n      bg-accent text-primary\n      hover:bg-accent-600 hover:shadow-accent hover:-translate-y-0.5\n      focus:ring-accent\n      font-semibold\n    ",secondary:"\n      bg-primary text-white\n      hover:bg-primary-700 hover:shadow-primary hover:-translate-y-0.5\n      focus:ring-primary\n      font-semibold\n    ",accent:"\n      bg-accent-500 text-white\n      hover:bg-accent-600 hover:shadow-accent hover:-translate-y-0.5\n      focus:ring-accent-500\n      font-semibold\n    ",outline:"\n      border-[1.5px] border-neutral-300 bg-transparent text-neutral-700\n      hover:bg-neutral-50 hover:border-neutral-400\n      focus:ring-neutral-400\n      font-medium\n    ",ghost:"\n      bg-transparent text-neutral-600\n      hover:bg-neutral-100 hover:text-neutral-900\n      focus:ring-neutral-300\n      font-medium\n    ",danger:"\n      bg-error text-white\n      hover:bg-red-700 hover:shadow-lg hover:shadow-red-500/30 hover:-translate-y-0.5\n      focus:ring-error\n      font-semibold\n    "}[r],"\n        ").concat({sm:"px-4 py-2 text-sm gap-1.5 min-h-[36px] rounded-md",md:"px-6 py-3 text-sm gap-2 min-h-[44px] rounded-lg",lg:"px-8 py-4 text-base gap-2.5 min-h-[56px] rounded-xl",icon:"p-2.5 min-w-[44px] min-h-[44px] rounded-lg"}[s],"\n        ").concat(l?"w-full":"","\n        ").concat(d,"\n      "),children:[o&&(0,n.jsx)(a.Z,{size:{sm:16,md:20,lg:24,icon:20}[s],className:"animate-spin shrink-0","aria-hidden":"true"}),!o&&m&&(0,n.jsx)("span",{className:"shrink-0",children:m}),t&&(0,n.jsx)("span",{children:t}),!o&&h&&(0,n.jsx)("span",{className:"shrink-0",children:h})]})}}},function(e){e.O(0,[648,878,971,117,744],function(){return e(e.s=460)}),_N_E=e.O()}]);