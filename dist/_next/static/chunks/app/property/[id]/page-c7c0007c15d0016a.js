(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[758],{3451:function(e,s,t){Promise.resolve().then(t.bind(t,4411)),Promise.resolve().then(t.bind(t,4594))},4411:function(e,s,t){"use strict";t.d(s,{default:function(){return z}});var a=t(7437),l=t(2265),r=t(3145),n=t(7648),i=t(2451),c=t(8997),o=t(4394),m=t(407),d=t(6595),x=t(3774),u=t(5805),h=t(1128),p=t(3299),j=t(5884),g=t(401),b=t(9322),f=t(2369),N=t(9345),v=t(3041),w=t(2489),y=t(6741),k=t(8211),C=t(6586),D=t(9376);function z(e){let{propertyId:s}=e,t=(0,C._1)(s);t||(0,D.notFound)();let[z,S]=(0,l.useState)(0),[Z,O]=(0,l.useState)(!1),[L,I]=(0,l.useState)(!1),[$,M]=(0,l.useState)(""),[T,_]=(0,l.useState)(""),[A,G]=(0,l.useState)(1),[E,F]=(0,l.useState)(""),[P,W]=(0,l.useState)(""),[U,V]=(0,l.useState)(""),[Y,q]=(0,l.useState)(""),[H,R]=(0,l.useState)({}),[B,J]=(0,l.useState)(!1),[K,Q]=(0,l.useState)(!1),X=(()=>{if(!$||!T)return 0;let e=new Date($),s=Math.ceil((new Date(T).getTime()-e.getTime())/864e5);return s>0?s:0})(),ee=X>=28,es=ee&&t.monthlyDiscount?(100-t.monthlyDiscount)/100:1,et=Math.round(t.price*es),ea=X*et,el=Math.round(.1*ea),er=ea+el,en=()=>{S(e=>e===t.images.length-1?0:e+1)},ei=()=>{S(e=>0===e?t.images.length-1:e-1)},ec=e=>{S(e)},eo=()=>{let e={};if($||(e.checkIn="请选择入住日期"),T||(e.checkOut="请选择退房日期"),$&&T){let s=new Date($);new Date(T)<=s&&(e.checkOut="退房日期必须晚于入住日期"),t.minNights&&X<t.minNights&&(e.checkOut="最少需预订 ".concat(t.minNights," 天"))}return E.trim()||(e.name="请输入您的姓名"),P.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P)||(e.email="请输入有效的邮箱地址"):e.email="请输入邮箱地址",U.trim()?/^[\d\s\-\+\(\)]+$/.test(U)||(e.phone="请输入有效的电话号码"):e.phone="请输入联系电话",(A<1||A>t.maxGuests)&&(e.guests="入住人数需在 1-".concat(t.maxGuests," 人之间")),R(e),0===Object.keys(e).length},em=async()=>{eo()&&(J(!0),await new Promise(e=>setTimeout(e,1500)),J(!1),Q(!0))},ed=(0,l.useMemo)(()=>C.wV.filter(e=>e.id!==t.id).filter(e=>{var s;return e.location.includes((null===(s=t.location.split(",")[1])||void 0===s?void 0:s.trim())||"")||Math.abs(e.price-t.price)/t.price<.3}).slice(0,3),[t]);return(0,a.jsxs)("main",{className:"min-h-screen bg-white",children:[(0,a.jsx)("nav",{className:"sticky top-0 z-40 bg-white border-b border-neutral-200",children:(0,a.jsx)(y.W2,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)(n.default,{href:"/properties",className:"flex items-center text-neutral-600 hover:text-neutral-900",children:[(0,a.jsx)(i.Z,{size:20}),(0,a.jsx)("span",{className:"ml-1 hidden sm:inline",children:"返回列表"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>O(!Z),className:"p-2 hover:bg-neutral-100 transition-colors",children:(0,a.jsx)(c.Z,{size:20,className:Z?"fill-error text-error":"text-neutral-600"})}),(0,a.jsx)("button",{className:"p-2 hover:bg-neutral-100 transition-colors",children:(0,a.jsx)(o.Z,{size:20,className:"text-neutral-600"})})]})]})})}),(0,a.jsx)("div",{className:"bg-neutral-100",children:(0,a.jsx)(y.W2,{children:(0,a.jsxs)("div",{className:"py-4",children:[(0,a.jsxs)("div",{className:"relative aspect-[16/9] max-h-[60vh] bg-neutral-200 overflow-hidden cursor-pointer",onClick:()=>I(!0),children:[(0,a.jsx)(r.default,{src:t.images[z],alt:"".concat(t.title," - 图片 ").concat(z+1),fill:!0,priority:!0,className:"object-cover"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),ei()},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-white/90 hover:bg-white transition-colors shadow-lg",children:(0,a.jsx)(i.Z,{size:24})}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),en()},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-white/90 hover:bg-white transition-colors shadow-lg",children:(0,a.jsx)(m.Z,{size:24})}),(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 px-4 py-2 bg-neutral-900/80 text-white text-sm",children:[z+1," / ",t.images.length]}),(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),I(!0)},className:"absolute bottom-4 left-4 px-4 py-2 bg-white text-neutral-900 text-sm font-medium hover:bg-neutral-100 transition-colors",children:["查看全部 ",t.images.length," 张图片"]})]}),(0,a.jsx)("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:t.images.map((e,s)=>(0,a.jsx)("button",{onClick:()=>ec(s),className:"relative flex-shrink-0 w-24 h-16 overflow-hidden transition-all ".concat(s===z?"ring-2 ring-primary ring-offset-2":"opacity-70 hover:opacity-100"),children:(0,a.jsx)(r.default,{src:e,alt:"缩略图 ".concat(s+1),fill:!0,className:"object-cover"})},s))})]})})}),(0,a.jsx)(y.W2,{className:"py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center gap-1 shrink-0",children:[(0,a.jsx)(d.Z,{size:18,className:"text-accent fill-accent"}),(0,a.jsx)("span",{className:"font-medium",children:t.rating}),(0,a.jsxs)("span",{className:"text-neutral-400",children:["(",t.reviewCount," 评价)"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-neutral-600",children:[(0,a.jsx)(x.Z,{size:18}),(0,a.jsx)("span",{children:t.location})]})]}),(0,a.jsx)(y.iz,{className:"my-6"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-neutral-50 border border-neutral-200",children:[(0,a.jsx)(u.Z,{className:"text-primary",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[t.maxGuests," 人"]}),(0,a.jsx)("div",{className:"text-sm text-neutral-500",children:"最多入住"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-neutral-50 border border-neutral-200",children:[(0,a.jsx)(h.Z,{className:"text-primary",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[t.bedrooms," 室"]}),(0,a.jsx)("div",{className:"text-sm text-neutral-500",children:"卧室"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-neutral-50 border border-neutral-200",children:[(0,a.jsx)(p.Z,{className:"text-primary",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[t.bathrooms," 卫"]}),(0,a.jsx)("div",{className:"text-sm text-neutral-500",children:"卫生间"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-neutral-50 border border-neutral-200",children:[(0,a.jsx)(j.Z,{className:"text-primary",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[t.area," m\xb2"]}),(0,a.jsx)("div",{className:"text-sm text-neutral-500",children:"面积"})]})]})]}),(0,a.jsx)(y.iz,{className:"my-6"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"房源介绍"}),(0,a.jsx)("div",{className:"text-neutral-600 whitespace-pre-line leading-relaxed",children:t.description||"这套位于".concat(t.location,"的精美公寓，拥有").concat(t.bedrooms,"间宽敞舒适的卧室和").concat(t.bathrooms,"间现代化浴室。\n\n公寓总面积").concat(t.area,"平方米，最多可容纳").concat(t.maxGuests,"位客人入住。精心设计的空间布局，高品质的装修材料，为您提供舒适的居住体验。\n\n公寓位于市中心黄金地段，交通便利，周边配套设施完善。无论是商务出差还是家庭度假，都是您的理想选择。")})]}),(0,a.jsx)(y.iz,{className:"my-6"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"配套设施"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.amenities.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 text-neutral-700 p-3 bg-neutral-50",children:[(0,a.jsx)(g.Z,{size:18,className:"text-success"}),e]},e))})]}),ed.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.iz,{className:"my-6"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"相似房源推荐"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ed.map(e=>(0,a.jsx)(n.default,{href:"/property/".concat(e.id),className:"group",children:(0,a.jsxs)(y.Zb,{className:"flex gap-4 p-4 hover:shadow-lg transition-shadow",children:[(0,a.jsx)("div",{className:"relative w-32 h-24 flex-shrink-0 overflow-hidden",children:(0,a.jsx)(r.default,{src:e.images[0],alt:e.title,fill:!0,className:"object-cover transition-transform group-hover:scale-105"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-medium text-neutral-900 line-clamp-1 group-hover:text-primary transition-colors",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-neutral-500 line-clamp-1 mt-1",children:e.location}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,a.jsx)(d.Z,{size:14,className:"text-accent fill-accent"}),(0,a.jsx)("span",{className:"text-sm",children:e.rating}),(0,a.jsxs)("span",{className:"text-sm text-neutral-400",children:["(",e.reviewCount,")"]})]}),(0,a.jsxs)("div",{className:"mt-2 font-semibold text-neutral-900",children:["$",e.price," ",(0,a.jsx)("span",{className:"text-sm font-normal text-neutral-500",children:"/晚"})]})]})]})},e.id))})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"sticky top-24",children:(0,a.jsxs)(y.Zb,{className:"p-6 border border-neutral-200",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-1 mb-4",children:[(0,a.jsxs)("span",{className:"text-3xl font-bold text-neutral-900",children:["$",t.price]}),(0,a.jsx)("span",{className:"text-neutral-500",children:"CAD / 晚"})]}),t.monthlyDiscount&&t.monthlyDiscount>0&&(0,a.jsxs)(y.Ct,{variant:"primary",className:"mb-4",children:["月租享 ",t.monthlyDiscount,"% 优惠"]}),t.minNights&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 text-sm text-amber-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{size:16}),(0,a.jsxs)("span",{className:"font-medium",children:[t.minNights,"天起租"]})]})}),(0,a.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"入住 / 退房日期"}),(0,a.jsx)(k.Z,{checkIn:$,checkOut:T,onCheckInChange:M,onCheckOutChange:_,minNights:t.minNights||1}),(H.checkIn||H.checkOut)&&(0,a.jsx)("p",{className:"text-xs text-error mt-1",children:H.checkIn||H.checkOut})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"入住人数"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",size:16}),(0,a.jsx)("select",{value:A,onChange:e=>G(Number(e.target.value)),className:"w-full pl-9 pr-3 py-2.5 border text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary bg-white ".concat(H.guests?"border-error":"border-neutral-300"),children:Array.from({length:t.maxGuests},(e,s)=>s+1).map(e=>(0,a.jsxs)("option",{value:e,children:[e," 位房客"]},e))})]}),H.guests&&(0,a.jsx)("p",{className:"text-xs text-error mt-1",children:H.guests})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"您的姓名"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",size:16}),(0,a.jsx)("input",{type:"text",value:E,onChange:e=>F(e.target.value),placeholder:"请输入您的姓名",className:"w-full pl-9 pr-3 py-2.5 border text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary ".concat(H.name?"border-error":"border-neutral-300")})]}),H.name&&(0,a.jsx)("p",{className:"text-xs text-error mt-1",children:H.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"邮箱地址"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(N.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",size:16}),(0,a.jsx)("input",{type:"email",value:P,onChange:e=>W(e.target.value),placeholder:"your@email.com",className:"w-full pl-9 pr-3 py-2.5 border text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary ".concat(H.email?"border-error":"border-neutral-300")})]}),H.email&&(0,a.jsx)("p",{className:"text-xs text-error mt-1",children:H.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"联系电话"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",size:16}),(0,a.jsx)("input",{type:"tel",value:U,onChange:e=>V(e.target.value),placeholder:"+1 (xxx) xxx-xxxx",className:"w-full pl-9 pr-3 py-2.5 border text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary ".concat(H.phone?"border-error":"border-neutral-300")})]}),H.phone&&(0,a.jsx)("p",{className:"text-xs text-error mt-1",children:H.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["特殊要求 ",(0,a.jsx)("span",{className:"text-neutral-400",children:"(选填)"})]}),(0,a.jsx)("textarea",{value:Y,onChange:e=>q(e.target.value),placeholder:"如有特殊要求，请在此说明...",rows:3,className:"w-full px-3 py-2.5 border border-neutral-300 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary resize-none"})]})]}),X>0&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-neutral-50 border border-neutral-200 text-sm",children:(0,a.jsxs)("div",{className:"space-y-2",children:[ee&&t.monthlyDiscount?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-between text-neutral-500",children:(0,a.jsxs)("span",{className:"line-through",children:["原价 $",t.price.toLocaleString()," CAD"]})}),(0,a.jsxs)("div",{className:"flex justify-between text-success",children:[(0,a.jsxs)("span",{children:["月租价 $",et.toLocaleString()," x ",X,"晚"]}),(0,a.jsxs)("span",{children:["$",ea.toLocaleString()," CAD"]})]})]}):(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-neutral-600",children:["$",t.price.toLocaleString()," x ",X,"晚"]}),(0,a.jsxs)("span",{children:["$",ea.toLocaleString()," CAD"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-neutral-600",children:[(0,a.jsx)("span",{children:"服务费"}),(0,a.jsxs)("span",{children:["$",el.toLocaleString()," CAD"]})]}),(0,a.jsx)(y.iz,{className:"my-2"}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold text-base",children:[(0,a.jsx)("span",{children:"总价"}),(0,a.jsxs)("span",{children:["$",er.toLocaleString()," CAD"]})]})]})}),(0,a.jsx)(y.zx,{className:"w-full",size:"lg",isLoading:B,onClick:em,children:B?"提交中...":"立即预订"}),(0,a.jsx)("p",{className:"text-center text-sm text-neutral-500 mt-3",children:"您暂时不会被收费"})]})})})]})}),L&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-neutral-900",children:(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-neutral-900",children:[(0,a.jsxs)("h3",{className:"text-white font-medium",children:[z+1," / ",t.images.length]}),(0,a.jsx)("button",{onClick:()=>I(!1),className:"p-2 text-white hover:bg-neutral-800 transition-colors",children:(0,a.jsx)(w.Z,{size:24})})]}),(0,a.jsxs)("div",{className:"flex-1 relative flex items-center justify-center",children:[(0,a.jsx)(r.default,{src:t.images[z],alt:"".concat(t.title," - 图片 ").concat(z+1),fill:!0,className:"object-contain"}),(0,a.jsx)("button",{onClick:ei,className:"absolute left-4 p-3 bg-white/10 hover:bg-white/20 text-white transition-colors",children:(0,a.jsx)(i.Z,{size:32})}),(0,a.jsx)("button",{onClick:en,className:"absolute right-4 p-3 bg-white/10 hover:bg-white/20 text-white transition-colors",children:(0,a.jsx)(m.Z,{size:32})})]}),(0,a.jsx)("div",{className:"p-4 bg-neutral-900",children:(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto justify-center",children:t.images.map((e,s)=>(0,a.jsx)("button",{onClick:()=>ec(s),className:"relative flex-shrink-0 w-20 h-14 overflow-hidden transition-all ".concat(s===z?"ring-2 ring-accent ring-offset-2 ring-offset-neutral-900":"opacity-50 hover:opacity-100"),children:(0,a.jsx)(r.default,{src:e,alt:"缩略图 ".concat(s+1),fill:!0,className:"object-cover"})},s))})})]})}),(0,a.jsx)(y.u_,{isOpen:K,onClose:()=>Q(!1),title:"预订申请已提交",footer:(0,a.jsx)(y.zx,{onClick:()=>Q(!1),children:"确定"}),children:(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-success/10 flex items-center justify-center",children:(0,a.jsx)(g.Z,{size:32,className:"text-success"})}),(0,a.jsx)("p",{className:"text-neutral-600",children:"您的预订申请已成功提交！我们的客服人员将在24小时内与您联系确认。"}),(0,a.jsxs)("div",{className:"mt-4 p-4 bg-neutral-50 text-left text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"房源："}),t.title]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"入住日期："}),$]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"退房日期："}),T]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"入住人数："}),A,"人"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"总价："}),"$",er.toLocaleString()," CAD"]})]})]})})]})}},4594:function(e,s,t){"use strict";var a=t(7437),l=t(7648),r=t(4938);s.default=function(e){let{className:s="",variant:t="fixed"}=e;return"fixed"===t?(0,a.jsxs)(l.default,{href:"/",className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 px-4 py-3 bg-primary text-white shadow-lg hover:bg-primary-700 transition-all ".concat(s),title:"返回首页",children:[(0,a.jsx)(r.Z,{size:20}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"首页"})]}):(0,a.jsxs)(l.default,{href:"/",className:"inline-flex items-center gap-2 px-4 py-2 text-primary hover:text-primary-700 transition-colors ".concat(s),children:[(0,a.jsx)(r.Z,{size:18}),(0,a.jsx)("span",{children:"返回首页"})]})}},8211:function(e,s,t){"use strict";var a=t(7437),l=t(2265),r=t(2489),n=t(2451),i=t(407);let c=(e,s)=>{let t=new Date(e,s,1),a=new Date(e,s+1,0).getDate(),l=t.getDay(),r=[];for(let e=0;e<l;e++)r.push(null);for(let e=1;e<=a;e++)r.push(e);return r},o=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],m=["日","一","二","三","四","五","六"];s.Z=function(e){let{checkIn:s,checkOut:t,onCheckInChange:d,onCheckOutChange:x,className:u=""}=e,[h,p]=(0,l.useState)(!1),[j,g]=(0,l.useState)(null),[b,f]=(0,l.useState)(new Date().getMonth()),[N,v]=(0,l.useState)(new Date().getFullYear()),w=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&(p(!1),g(null))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let y=new Date;y.setHours(0,0,0,0);let k=e=>{let a=new Date(N,b,e).toISOString().split("T")[0];if("checkIn"!==j&&(s||j)){if("checkOut"===j||s&&!t){if(new Date(a)<=new Date(s))return;x(a),p(!1),g(null)}}else t&&new Date(a)>=new Date(t)?(d(a),x("")):d(a),g("checkOut")},C=e=>new Date(N,b,e)<y,D=e=>{if(!s||!e)return!1;let a=new Date(N,b,e),l=new Date(s),r=t?new Date(t):null;return!!r&&a>l&&a<r},z=e=>!!s&&!!e&&new Date(N,b,e).toISOString().split("T")[0]===s,S=e=>!!t&&!!e&&new Date(N,b,e).toISOString().split("T")[0]===t,Z=()=>{d(""),x(""),g("checkIn")},O=c(N,b);return(0,a.jsxs)("div",{ref:w,className:"relative ".concat(u),children:[(0,a.jsxs)("div",{className:"flex border bg-white transition-all ".concat(h?"border-primary ring-1 ring-primary":"border-neutral-300 hover:border-neutral-400"),onClick:()=>!h&&p(!0),children:[(0,a.jsxs)("div",{className:"flex-1 px-4 py-3 cursor-pointer border-r border-neutral-200 ".concat("checkIn"===j?"bg-neutral-50":""),onClick:()=>{p(!0),g("checkIn")},children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-neutral-900 uppercase tracking-wide",children:"入住日期"}),(0,a.jsx)("div",{className:"text-sm mt-1 ".concat(s?"text-neutral-900 font-medium":"text-neutral-400"),children:s?new Date(s).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}):"选择日期"})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 py-3 cursor-pointer ".concat("checkOut"===j?"bg-neutral-50":""),onClick:()=>{s&&(p(!0),g("checkOut"))},children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-neutral-900 uppercase tracking-wide",children:"退房日期"}),(0,a.jsx)("div",{className:"text-sm mt-1 ".concat(t?"text-neutral-900 font-medium":"text-neutral-400"),children:t?new Date(t).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}):"选择日期"})]}),(s||t)&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),Z()},className:"px-3 hover:bg-neutral-100 flex items-center",children:(0,a.jsx)(r.Z,{size:18,className:"text-neutral-400"})})]}),h&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-neutral-200 shadow-xl z-50 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("button",{onClick:()=>{new Date(N,b-1,1)>=new Date(y.getFullYear(),y.getMonth(),1)&&(0===b?(f(11),v(N-1)):f(b-1))},className:"p-1 hover:bg-neutral-100 rounded-full",children:(0,a.jsx)(n.Z,{size:20})}),(0,a.jsxs)("div",{className:"text-sm font-semibold",children:[N,"年",o[b]]}),(0,a.jsx)("button",{onClick:()=>{11===b?(f(0),v(N+1)):f(b+1)},className:"p-1 hover:bg-neutral-100 rounded-full",children:(0,a.jsx)(i.Z,{size:20})})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:m.map(e=>(0,a.jsx)("div",{className:"text-center text-xs text-neutral-400 py-1",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:O.map((e,s)=>(0,a.jsx)("button",{disabled:null===e||null!==e&&C(e),onClick:()=>e&&k(e),className:"\n                  aspect-square flex items-center justify-center text-sm rounded-full\n                  ".concat(null===e?"invisible":"","\n                  ").concat(null!==e&&C(e)?"text-neutral-300 cursor-not-allowed":"hover:bg-neutral-100 cursor-pointer","\n                  ").concat(null!==e&&z(e)?"bg-neutral-900 text-white hover:bg-neutral-800":"","\n                  ").concat(null!==e&&S(e)?"bg-neutral-900 text-white hover:bg-neutral-800":"","\n                  ").concat(null!==e&&D(e)?"bg-neutral-100":"","\n                "),children:e},s))}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-neutral-200",children:[(0,a.jsx)("button",{onClick:Z,className:"text-sm underline text-neutral-600 hover:text-neutral-900",children:"清除日期"}),(0,a.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-neutral-900 text-white text-sm font-medium hover:bg-neutral-800",children:"完成"})]})]})]})}},6586:function(e,s,t){"use strict";t.d(s,{_1:function(){return l},wV:function(){return a}});let a=[{id:"1",title:"Cooper St 豪华湖景公寓",location:"5811-55 Cooper St, Toronto, ON M5E 0G1",price:680,priceUnit:"晚",rating:4.9,reviewCount:42,images:["/images/cooper-55-c5e8357d.jpg","/images/cooper-55-e98a880d.jpg","/images/cooper-55-a12c07ee.jpg","/images/cooper-55-c38824ec.jpg","/images/cooper-55-e62f3e96.jpg"],maxGuests:6,area:111,bedrooms:3,bathrooms:3,amenities:["WiFi","空调","洗衣机","厨房","湖景","停车位","24小时安保"],featured:!0,description:"位于多伦多市中心核心地段，享有安大略湖壮丽景色。现代化设计的豪华公寓，3室3卫，1200平方英尺宽敞空间，距离Distillery District仅几步之遥，步行可达湖滨步道。配备高端家具和设施。",minNights:28,monthlyDiscount:20},{id:"2",title:"Simcoe St 高层精品公寓",location:"3709-238 Simcoe St, Toronto, ON M5S 1T4",price:450,priceUnit:"晚",rating:4.8,reviewCount:38,images:["/images/simcoe-238-living.jpg","/images/simcoe-238-kitchen.jpg","/images/simcoe-238-1.jpg","/images/simcoe-238-bath1.jpg"],maxGuests:5,area:102,bedrooms:3,bathrooms:2,amenities:["WiFi","空调","洗衣机","厨房","高层景观","24小时安保","浴缸"],featured:!0,description:"位于多伦多市中心的高层公寓，享有城市天际线美景。现代化装修，3室2卫，1100平方英尺宽敞空间，步行可达多伦多大学、皇家博物馆和各大商业区。",minNights:28,monthlyDiscount:20}],l=e=>a.find(s=>s.id===e)}},function(e){e.O(0,[648,60,878,533,276,971,117,744],function(){return e(e.s=3451)}),_N_E=e.O()}]);